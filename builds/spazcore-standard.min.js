var sc={};sc.app={};sc.helpers={};sc.dumplevel=1;sc.setDumpLevel=function(a){sc.dumplevel=parseInt(a,10);};var sch=sc.helpers;sc.events={};Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]};(function(){var b=Date,a=b.prototype,d=b.CultureInfo,g=function(m,j){if(!j){j=2;}return("000"+m).slice(j*-1);};a.clearTime=function(){this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);return this;};a.setTimeToNow=function(){var j=new Date();this.setHours(j.getHours());this.setMinutes(j.getMinutes());this.setSeconds(j.getSeconds());this.setMilliseconds(j.getMilliseconds());return this;};b.today=function(){return new Date().clearTime();};b.compare=function(l,j){if(isNaN(l)||isNaN(j)){throw new Error(l+" - "+j);}else{if(l instanceof Date&&j instanceof Date){return(l<j)?-1:(l>j)?1:0;}else{throw new TypeError(l+" - "+j);}}};b.equals=function(l,j){return(l.compareTo(j)===0);};b.getDayNumberFromName=function(l){var u=d.dayNames,j=d.abbreviatedDayNames,t=d.shortestDayNames,q=l.toLowerCase();for(var p=0;p<u.length;p++){if(u[p].toLowerCase()==q||j[p].toLowerCase()==q||t[p].toLowerCase()==q){return p;}}return -1;};b.getMonthNumberFromName=function(l){var q=d.monthNames,j=d.abbreviatedMonthNames,p=l.toLowerCase();for(var o=0;o<q.length;o++){if(q[o].toLowerCase()==p||j[o].toLowerCase()==p){return o;}}return -1;};b.isLeapYear=function(j){return((j%4===0&&j%100!==0)||j%400===0);};b.getDaysInMonth=function(j,l){return[31,(b.isLeapYear(j)?29:28),31,30,31,30,31,31,30,31,30,31][l];};b.getTimezoneAbbreviation=function(n){var m=d.timezones,l;for(var j=0;j<m.length;j++){if(m[j].offset===n){return m[j].name;}}return null;};b.getTimezoneOffset=function(j){var n=d.timezones,m;for(var l=0;l<n.length;l++){if(n[l].name===j.toUpperCase()){return n[l].offset;}}return null;};a.clone=function(){return new Date(this.getTime());};a.compareTo=function(j){return Date.compare(this,j);};a.equals=function(j){return Date.equals(this,j||new Date());};a.between=function(l,j){return this.getTime()>=l.getTime()&&this.getTime()<=j.getTime();};a.isAfter=function(j){return this.compareTo(j||new Date())===1;};a.isBefore=function(j){return(this.compareTo(j||new Date())===-1);};a.isToday=a.isSameDay=function(j){return this.clone().clearTime().equals((j||new Date()).clone().clearTime());};a.addMilliseconds=function(j){this.setMilliseconds(this.getMilliseconds()+j*1);return this;};a.addSeconds=function(j){return this.addMilliseconds(j*1000);};a.addMinutes=function(j){return this.addMilliseconds(j*60000);};a.addHours=function(j){return this.addMilliseconds(j*3600000);};a.addDays=function(j){this.setDate(this.getDate()+j*1);return this;};a.addWeeks=function(j){return this.addDays(j*7);};a.addMonths=function(j){var l=this.getDate();this.setDate(1);this.setMonth(this.getMonth()+j*1);this.setDate(Math.min(l,b.getDaysInMonth(this.getFullYear(),this.getMonth())));return this;};a.addYears=function(j){return this.addMonths(j*12);};a.add=function(l){if(typeof l=="number"){this._orient=l;return this;}var j=l;if(j.milliseconds){this.addMilliseconds(j.milliseconds);}if(j.seconds){this.addSeconds(j.seconds);}if(j.minutes){this.addMinutes(j.minutes);}if(j.hours){this.addHours(j.hours);}if(j.weeks){this.addWeeks(j.weeks);}if(j.months){this.addMonths(j.months);}if(j.years){this.addYears(j.years);}if(j.days){this.addDays(j.days);}return this;};var e,f,c;a.getWeek=function(){var u,t,q,p,o,m,l,j,y,v;e=(!e)?this.getFullYear():e;f=(!f)?this.getMonth()+1:f;c=(!c)?this.getDate():c;if(f<=2){u=e-1;t=(u/4|0)-(u/100|0)+(u/400|0);q=((u-1)/4|0)-((u-1)/100|0)+((u-1)/400|0);y=t-q;o=0;m=c-1+(31*(f-1));}else{u=e;t=(u/4|0)-(u/100|0)+(u/400|0);q=((u-1)/4|0)-((u-1)/100|0)+((u-1)/400|0);y=t-q;o=y+1;m=c+((153*(f-3)+2)/5)+58+y;}l=(u+t)%7;p=(m+l-o)%7;j=(m+3-p)|0;if(j<0){v=53-((l-y)/5|0);}else{if(j>364+y){v=1;}else{v=(j/7|0)+1;}}e=f=c=null;return v;};a.getISOWeek=function(){e=this.getUTCFullYear();f=this.getUTCMonth()+1;c=this.getUTCDate();return g(this.getWeek());};a.setWeek=function(j){return this.moveToDayOfWeek(1).addWeeks(j-this.getWeek());};var h=function(o,m,j,l){if(typeof o=="undefined"){return false;}else{if(typeof o!="number"){throw new TypeError(o+" is not a Number.");}else{if(o<m||o>j){throw new RangeError(o+" is not a valid value for "+l+".");}}}return true;};b.validateMillisecond=function(j){return h(j,0,999,"millisecond");};b.validateSecond=function(j){return h(j,0,59,"second");};b.validateMinute=function(j){return h(j,0,59,"minute");};b.validateHour=function(j){return h(j,0,23,"hour");};b.validateDay=function(l,j,m){return h(l,1,b.getDaysInMonth(j,m),"day");};b.validateMonth=function(j){return h(j,0,11,"month");};b.validateYear=function(j){return h(j,0,9999,"year");};a.set=function(j){if(b.validateMillisecond(j.millisecond)){this.addMilliseconds(j.millisecond-this.getMilliseconds());}if(b.validateSecond(j.second)){this.addSeconds(j.second-this.getSeconds());}if(b.validateMinute(j.minute)){this.addMinutes(j.minute-this.getMinutes());}if(b.validateHour(j.hour)){this.addHours(j.hour-this.getHours());}if(b.validateMonth(j.month)){this.addMonths(j.month-this.getMonth());}if(b.validateYear(j.year)){this.addYears(j.year-this.getFullYear());}if(b.validateDay(j.day,this.getFullYear(),this.getMonth())){this.addDays(j.day-this.getDate());}if(j.timezone){this.setTimezone(j.timezone);}if(j.timezoneOffset){this.setTimezoneOffset(j.timezoneOffset);}if(j.week&&h(j.week,0,53,"week")){this.setWeek(j.week);}return this;};a.moveToFirstDayOfMonth=function(){return this.set({day:1});};a.moveToLastDayOfMonth=function(){return this.set({day:b.getDaysInMonth(this.getFullYear(),this.getMonth())});};a.moveToNthOccurrence=function(l,m){var j=0;if(m>0){j=m-1;}else{if(m===-1){this.moveToLastDayOfMonth();if(this.getDay()!==l){this.moveToDayOfWeek(l,-1);}return this;}}return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(l,+1).addWeeks(j);};a.moveToDayOfWeek=function(j,l){var m=(j-this.getDay()+7*(l||+1))%7;return this.addDays((m===0)?m+=7*(l||+1):m);};a.moveToMonth=function(m,j){var l=(m-this.getMonth()+12*(j||+1))%12;return this.addMonths((l===0)?l+=12*(j||+1):l);};a.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/86400000)+1;};a.getTimezone=function(){return b.getTimezoneAbbreviation(this.getUTCOffset());};a.setTimezoneOffset=function(m){var j=this.getTimezoneOffset(),l=Number(m)*-6/10;return this.addMinutes(l-j);};a.setTimezone=function(j){return this.setTimezoneOffset(b.getTimezoneOffset(j));};a.hasDaylightSavingTime=function(){return(Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset());};a.isDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!=this.getTimezoneOffset();};a.getUTCOffset=function(){var l=this.getTimezoneOffset()*-10/6,j;if(l<0){j=(l-10000).toString();return j.charAt(0)+j.substr(2);}else{j=(l+10000).toString();return"+"+j.substr(1);}};a.getElapsed=function(j){return(j||new Date())-this;};if(!a.toISOString){a.toISOString=function(){function j(l){return l<10?"0"+l:l;}return'"'+this.getUTCFullYear()+"-"+j(this.getUTCMonth()+1)+"-"+j(this.getUTCDate())+"T"+j(this.getUTCHours())+":"+j(this.getUTCMinutes())+":"+j(this.getUTCSeconds())+'Z"';};}a._toString=a.toString;a.toString=function(m){var j=this;if(m&&m.length==1){var n=d.formatPatterns;j.t=j.toString;switch(m){case"d":return j.t(n.shortDate);case"D":return j.t(n.longDate);case"F":return j.t(n.fullDateTime);case"m":return j.t(n.monthDay);case"r":return j.t(n.rfc1123);case"s":return j.t(n.sortableDateTime);case"t":return j.t(n.shortTime);case"T":return j.t(n.longTime);case"u":return j.t(n.universalSortableDateTime);case"y":return j.t(n.yearMonth);}}var l=function(o){switch(o*1){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th";}};return m?m.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(o){if(o.charAt(0)==="\\"){return o.replace("\\","");}j.h=j.getHours;switch(o){case"hh":return g(j.h()<13?(j.h()===0?12:j.h()):(j.h()-12));case"h":return j.h()<13?(j.h()===0?12:j.h()):(j.h()-12);case"HH":return g(j.h());case"H":return j.h();case"mm":return g(j.getMinutes());case"m":return j.getMinutes();case"ss":return g(j.getSeconds());case"s":return j.getSeconds();case"yyyy":return g(j.getFullYear(),4);case"yy":return g(j.getFullYear());case"dddd":return d.dayNames[j.getDay()];case"ddd":return d.abbreviatedDayNames[j.getDay()];case"dd":return g(j.getDate());case"d":return j.getDate();case"MMMM":return d.monthNames[j.getMonth()];case"MMM":return d.abbreviatedMonthNames[j.getMonth()];case"MM":return g((j.getMonth()+1));case"M":return j.getMonth()+1;case"t":return j.h()<12?d.amDesignator.substring(0,1):d.pmDesignator.substring(0,1);case"tt":return j.h()<12?d.amDesignator:d.pmDesignator;case"S":return l(j.getDate());default:return o;}}):this._toString();};}());(function(){Date.Parsing={Exception:function(j){this.message="Parse error at '"+j.substring(0,10)+" ...'";}};var a=Date.Parsing;var c=a.Operators={rtoken:function(j){return function(l){var m=l.match(j);if(m){return([m[0],l.substring(m[0].length)]);}else{throw new a.Exception(l);}};},token:function(j){return function(l){return c.rtoken(new RegExp("^s*"+l+"s*"))(l);};},stoken:function(j){return c.rtoken(new RegExp("^"+j));},until:function(j){return function(l){var m=[],o=null;while(l.length){try{o=j.call(this,l);}catch(n){m.push(o[0]);l=o[1];continue;}break;}return[m,l];};},many:function(j){return function(l){var o=[],m=null;while(l.length){try{m=j.call(this,l);}catch(n){return[o,l];}o.push(m[0]);l=m[1];}return[o,l];};},optional:function(j){return function(l){var m=null;try{m=j.call(this,l);}catch(n){return[null,l];}return[m[0],m[1]];};},not:function(j){return function(l){try{j.call(this,l);}catch(m){return[null,l];}throw new a.Exception(l);};},ignore:function(j){return j?function(l){var m=null;m=j.call(this,l);return[null,m[1]];}:null;},product:function(){var l=arguments[0],m=Array.prototype.slice.call(arguments,1),n=[];for(var j=0;j<l.length;j++){n.push(c.each(l[j],m));}return n;},cache:function(m){var j={},l=null;return function(n){try{l=j[n]=(j[n]||m.call(this,n));}catch(o){l=j[n]=o;}if(l instanceof a.Exception){throw l;}else{return l;}};},any:function(){var j=arguments;return function(m){var n=null;for(var l=0;l<j.length;l++){if(j[l]==null){continue;}try{n=(j[l].call(this,m));}catch(o){n=null;}if(n){return n;}}throw new a.Exception(m);};},each:function(){var j=arguments;return function(m){var p=[],n=null;for(var l=0;l<j.length;l++){if(j[l]==null){continue;}try{n=(j[l].call(this,m));}catch(o){throw new a.Exception(m);}p.push(n[0]);m=n[1];}return[p,m];};},all:function(){var l=arguments,j=j;return j.each(j.optional(l));},sequence:function(j,l,m){l=l||c.rtoken(/^\s*/);m=m||null;if(j.length==1){return j[0];}return function(t){var u=null,v=null;var y=[];for(var p=0;p<j.length;p++){try{u=j[p].call(this,t);}catch(w){break;}y.push(u[0]);try{v=l.call(this,u[1]);}catch(o){v=null;break;}t=v[1];}if(!u){throw new a.Exception(t);}if(v){throw new a.Exception(v[1]);}if(m){try{u=m.call(this,u[1]);}catch(n){throw new a.Exception(u[1]);}}return[y,(u?u[1]:t)];};},between:function(l,m,j){j=j||l;var n=c.each(c.ignore(l),m,c.ignore(j));return function(o){var p=n.call(this,o);return[[p[0][0],r[0][2]],p[1]];};},list:function(j,l,m){l=l||c.rtoken(/^\s*/);m=m||null;return(j instanceof Array?c.each(c.product(j.slice(0,-1),c.ignore(l)),j.slice(-1),c.ignore(m)):c.each(c.many(c.each(j,c.ignore(l))),px,c.ignore(m)));},set:function(j,l,m){l=l||c.rtoken(/^\s*/);m=m||null;return function(E){var n=null,t=null,o=null,u=null,v=[[],E],D=false;for(var y=0;y<j.length;y++){o=null;t=null;n=null;D=(j.length==1);try{n=j[y].call(this,E);}catch(B){continue;}u=[[n[0]],n[1]];if(n[1].length>0&&!D){try{o=l.call(this,n[1]);}catch(C){D=true;}}else{D=true;}if(!D&&o[1].length===0){D=true;}if(!D){var z=[];for(var w=0;w<j.length;w++){if(y!=w){z.push(j[w]);}}t=c.set(z,l).call(this,o[1]);if(t[0].length>0){u[0]=u[0].concat(t[0]);u[1]=t[1];}}if(u[1].length<v[1].length){v=u;}if(v[1].length===0){break;}}if(v[0].length===0){return v;}if(m){try{o=m.call(this,v[1]);}catch(A){throw new a.Exception(v[1]);}v[1]=o[1];}return v;};},forward:function(j,l){return function(m){return j[l].call(this,m);};},replace:function(l,j){return function(m){var n=l.call(this,m);return[j,n[1]];};},process:function(l,j){return function(m){var n=l.call(this,m);return[j.call(this,n[0]),n[1]];};},min:function(j,l){return function(m){var n=l.call(this,m);if(n[0].length<j){throw new a.Exception(m);}return n;};}};var h=function(j){return function(){var l=null,o=[];if(arguments.length>1){l=Array.prototype.slice.call(arguments);}else{if(arguments[0] instanceof Array){l=arguments[0];}}if(l){for(var n=0,m=l.shift();n<m.length;n++){l.unshift(m[n]);o.push(j.apply(null,l));l.shift();return o;}}else{return j.apply(null,arguments);}};};var g="optional not ignore cache".split(/\s/);for(var d=0;d<g.length;d++){c[g[d]]=h(c[g[d]]);}var f=function(j){return function(){if(arguments[0] instanceof Array){return j.apply(null,arguments[0]);}else{return j.apply(null,arguments);}};};var e="each any all".split(/\s/);for(var b=0;b<e.length;b++){c[e[b]]=f(c[e[b]]);}}());(function(){var e=Date,n=e.prototype,f=e.CultureInfo;var h=function(o){var p=[];for(var g=0;g<o.length;g++){if(o[g] instanceof Array){p=p.concat(h(o[g]));}else{if(o[g]){p.push(o[g]);}}}return p;};e.Grammar={};e.Translator={hour:function(g){return function(){this.hour=Number(g);};},minute:function(g){return function(){this.minute=Number(g);};},second:function(g){return function(){this.second=Number(g);};},meridian:function(g){return function(){this.meridian=g.slice(0,1).toLowerCase();};},timezone:function(g){return function(){var o=g.replace(/[^\d\+\-]/g,"");if(o.length){this.timezoneOffset=Number(o);}else{this.timezone=g.toLowerCase();}};},day:function(g){var o=g[0];return function(){this.day=Number(o.match(/\d+/)[0]);};},month:function(g){return function(){this.month=(g.length==3)?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(g)/4:Number(g)-1;};},year:function(g){return function(){var o=Number(g);this.year=((g.length>2)?o:(o+(((o+2000)<f.twoDigitYearMax)?2000:1900)));};},rday:function(g){return function(){switch(g){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0;this.now=true;break;}};},finishExact:function(g){g=(g instanceof Array)?g:[g];for(var p=0;p<g.length;p++){if(g[p]){g[p].call(this);}}var o=new Date();if((this.hour||this.minute)&&(!this.month&&!this.year&&!this.day)){this.day=o.getDate();}if(!this.year){this.year=o.getFullYear();}if(!this.month&&this.month!==0){this.month=o.getMonth();}if(!this.day){this.day=1;}if(!this.hour){this.hour=0;}if(!this.minute){this.minute=0;}if(!this.second){this.second=0;}if(this.meridian&&this.hour){if(this.meridian=="p"&&this.hour<12){this.hour=this.hour+12;}else{if(this.meridian=="a"&&this.hour==12){this.hour=0;}}}if(this.day>e.getDaysInMonth(this.year,this.month)){throw new RangeError(this.day+" is not a valid value for days.");}var q=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);if(this.timezone){q.set({timezone:this.timezone});}else{if(this.timezoneOffset){q.set({timezoneOffset:this.timezoneOffset});}}return q;},finish:function(g){g=(g instanceof Array)?h(g):[g];if(g.length===0){return null;}for(var t=0;t<g.length;t++){if(typeof g[t]=="function"){g[t].call(this);}}var p=e.today();if(this.now&&!this.unit&&!this.operator){return new Date();}else{if(this.now){p=new Date();}}var u=!!(this.days&&this.days!==null||this.orient||this.operator);var v,s,q;q=((this.orient=="past"||this.operator=="subtract")?-1:1);if(!this.now&&"hour minute second".indexOf(this.unit)!=-1){p.setTimeToNow();}if(this.month||this.month===0){if("year day hour minute second".indexOf(this.unit)!=-1){this.value=this.month+1;this.month=null;u=true;}}if(!u&&this.weekday&&!this.day&&!this.days){var o=Date[this.weekday]();this.day=o.getDate();if(!this.month){this.month=o.getMonth();}this.year=o.getFullYear();}if(u&&this.weekday&&this.unit!="month"){this.unit="day";v=(e.getDayNumberFromName(this.weekday)-p.getDay());s=7;this.days=v?((v+(q*s))%s):(q*s);}if(this.month&&this.unit=="day"&&this.operator){this.value=(this.month+1);this.month=null;}if(this.value!=null&&this.month!=null&&this.year!=null){this.day=this.value*1;}if(this.month&&!this.day&&this.value){p.set({day:this.value*1});if(!u){this.day=this.value*1;}}if(!this.month&&this.value&&this.unit=="month"&&!this.now){this.month=this.value;u=true;}if(u&&(this.month||this.month===0)&&this.unit!="year"){this.unit="month";v=(this.month-p.getMonth());s=12;this.months=v?((v+(q*s))%s):(q*s);this.month=null;}if(!this.unit){this.unit="day";}if(!this.value&&this.operator&&this.operator!==null&&this[this.unit+"s"]&&this[this.unit+"s"]!==null){this[this.unit+"s"]=this[this.unit+"s"]+((this.operator=="add")?1:-1)+(this.value||0)*q;}else{if(this[this.unit+"s"]==null||this.operator!=null){if(!this.value){this.value=1;}this[this.unit+"s"]=this.value*q;}}if(this.meridian&&this.hour){if(this.meridian=="p"&&this.hour<12){this.hour=this.hour+12;}else{if(this.meridian=="a"&&this.hour==12){this.hour=0;}}}if(this.weekday&&!this.day&&!this.days){var o=Date[this.weekday]();this.day=o.getDate();if(o.getMonth()!==p.getMonth()){this.month=o.getMonth();}}if((this.month||this.month===0)&&!this.day){this.day=1;}if(!this.orient&&!this.operator&&this.unit=="week"&&this.value&&!this.day&&!this.month){return Date.today().setWeek(this.value);}if(u&&this.timezone&&this.day&&this.days){this.day=this.days;}return(u)?p.add(this):p.set(this);}};var j=e.Parsing.Operators,d=e.Grammar,m=e.Translator,b;d.datePartDelimiter=j.rtoken(/^([\s\-\.\,\/\x27]+)/);d.timePartDelimiter=j.stoken(":");d.whiteSpace=j.rtoken(/^\s*/);d.generalDelimiter=j.rtoken(/^(([\s\,]|at|@|on)+)/);var a={};d.ctoken=function(s){var q=a[s];if(!q){var t=f.regexPatterns;var p=s.split(/\s+/),o=[];for(var g=0;g<p.length;g++){o.push(j.replace(j.rtoken(t[p[g]]),p[g]));}q=a[s]=j.any.apply(null,o);}return q;};d.ctoken2=function(g){return j.rtoken(f.regexPatterns[g]);};d.h=j.cache(j.process(j.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),m.hour));d.hh=j.cache(j.process(j.rtoken(/^(0[0-9]|1[0-2])/),m.hour));d.H=j.cache(j.process(j.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),m.hour));d.HH=j.cache(j.process(j.rtoken(/^([0-1][0-9]|2[0-3])/),m.hour));d.m=j.cache(j.process(j.rtoken(/^([0-5][0-9]|[0-9])/),m.minute));d.mm=j.cache(j.process(j.rtoken(/^[0-5][0-9]/),m.minute));d.s=j.cache(j.process(j.rtoken(/^([0-5][0-9]|[0-9])/),m.second));d.ss=j.cache(j.process(j.rtoken(/^[0-5][0-9]/),m.second));d.hms=j.cache(j.sequence([d.H,d.m,d.s],d.timePartDelimiter));d.t=j.cache(j.process(d.ctoken2("shortMeridian"),m.meridian));d.tt=j.cache(j.process(d.ctoken2("longMeridian"),m.meridian));d.z=j.cache(j.process(j.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),m.timezone));d.zz=j.cache(j.process(j.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),m.timezone));d.zzz=j.cache(j.process(d.ctoken2("timezone"),m.timezone));d.timeSuffix=j.each(j.ignore(d.whiteSpace),j.set([d.tt,d.zzz]));d.time=j.each(j.optional(j.ignore(j.stoken("T"))),d.hms,d.timeSuffix);d.d=j.cache(j.process(j.each(j.rtoken(/^([0-2]\d|3[0-1]|\d)/),j.optional(d.ctoken2("ordinalSuffix"))),m.day));d.dd=j.cache(j.process(j.each(j.rtoken(/^([0-2]\d|3[0-1])/),j.optional(d.ctoken2("ordinalSuffix"))),m.day));d.ddd=d.dddd=j.cache(j.process(d.ctoken("sun mon tue wed thu fri sat"),function(g){return function(){this.weekday=g;};}));d.M=j.cache(j.process(j.rtoken(/^(1[0-2]|0\d|\d)/),m.month));d.MM=j.cache(j.process(j.rtoken(/^(1[0-2]|0\d)/),m.month));d.MMM=d.MMMM=j.cache(j.process(d.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),m.month));d.y=j.cache(j.process(j.rtoken(/^(\d\d?)/),m.year));d.yy=j.cache(j.process(j.rtoken(/^(\d\d)/),m.year));d.yyy=j.cache(j.process(j.rtoken(/^(\d\d?\d?\d?)/),m.year));d.yyyy=j.cache(j.process(j.rtoken(/^(\d\d\d\d)/),m.year));b=function(){return j.each(j.any.apply(null,arguments),j.not(d.ctoken2("timeContext")));};d.day=b(d.d,d.dd);d.month=b(d.M,d.MMM);d.year=b(d.yyyy,d.yy);d.orientation=j.process(d.ctoken("past future"),function(g){return function(){this.orient=g;};});d.operator=j.process(d.ctoken("add subtract"),function(g){return function(){this.operator=g;};});d.rday=j.process(d.ctoken("yesterday tomorrow today now"),m.rday);d.unit=j.process(d.ctoken("second minute hour day week month year"),function(g){return function(){this.unit=g;};});d.value=j.process(j.rtoken(/^\d\d?(st|nd|rd|th)?/),function(g){return function(){this.value=g.replace(/\D/g,"");};});d.expression=j.set([d.rday,d.operator,d.value,d.unit,d.orientation,d.ddd,d.MMM]);b=function(){return j.set(arguments,d.datePartDelimiter);};d.mdy=b(d.ddd,d.month,d.day,d.year);d.ymd=b(d.ddd,d.year,d.month,d.day);d.dmy=b(d.ddd,d.day,d.month,d.year);d.date=function(g){return((d[f.dateElementOrder]||d.mdy).call(this,g));};d.format=j.process(j.many(j.any(j.process(j.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(g){if(d[g]){return d[g];}else{throw e.Parsing.Exception(g);}}),j.process(j.rtoken(/^[^dMyhHmstz]+/),function(g){return j.ignore(j.stoken(g));}))),function(g){return j.process(j.each.apply(null,g),m.finishExact);});var l={};var c=function(g){return l[g]=(l[g]||d.format(g)[0]);};d.formats=function(o){if(o instanceof Array){var p=[];for(var g=0;g<o.length;g++){p.push(c(o[g]));}return j.any.apply(null,p);}else{return c(o);}};d._formats=d.formats(['"yyyy-MM-ddTHH:mm:ssZ"',"yyyy-MM-ddTHH:mm:ssZ","yyyy-MM-ddTHH:mm:ssz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mmZ","yyyy-MM-ddTHH:mmz","yyyy-MM-ddTHH:mm","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","MMddyyyy","ddMMyyyy","Mddyyyy","ddMyyyy","Mdyyyy","dMyyyy","yyyy","Mdyy","dMyy","d"]);d._start=j.process(j.set([d.date,d.time,d.expression],d.generalDelimiter,d.whiteSpace),m.finish);d.start=function(g){try{var o=d._formats.call({},g);if(o[1].length===0){return o;}}catch(p){}return d._start.call({},g);};e._parse=e.parse;e.parse=function(g){var o=null;if(!g){return null;}if(g instanceof Date){return g;}try{o=e.Grammar.start.call({},g.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"));}catch(p){return null;}return((o[1].length===0)?o[0]:null);};e.getParseFunction=function(o){var g=e.Grammar.formats(o);return function(p){var q=null;try{q=g.call({},p);}catch(t){return null;}return((q[1].length===0)?q[0]:null);};};e.parseExact=function(g,o){return e.getParseFunction(o)(g);};}());if(!this.JSON){JSON={};}(function(){function f(n){return n<10?"0"+n:n;}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z";};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf();};}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+string+'"';}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key);}if(typeof rep==="function"){value=rep.call(holder,key,value);}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null";}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null";}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v;}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v);}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v);}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v;}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" ";}}else{if(typeof space==="string"){indent=space;}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify");}return str("",{"":value});};}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v;}else{delete value[k];}}}}return reviver.call(holder,key,value);}cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4);});}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j;}throw new SyntaxError("JSON.parse");};}})();
/*
 * Sizzle CSS Selector Engine - v1.0
 *  Copyright 2009, The Dojo Foundation
 *  Released under the MIT, BSD, and GPL Licenses.
 *  More information: http://sizzlejs.com/
 */
(function(){var o=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,p=0,s=Object.prototype.toString,h=false,g=true;[0,0].sort(function(){g=false;return 0;});var c=function(B,e,E,F){E=E||[];var H=e=e||document;if(e.nodeType!==1&&e.nodeType!==9){return[];}if(!B||typeof B!=="string"){return E;}var C=[],y,J,M,w,A=true,z=d(e),G=B;while((o.exec(""),y=o.exec(G))!==null){G=y[3];C.push(y[1]);if(y[2]){w=y[3];break;}}if(C.length>1&&j.exec(B)){if(C.length===2&&l.relative[C[0]]){J=t(C[0]+C[1],e);}else{J=l.relative[C[0]]?[e]:c(C.shift(),e);while(C.length){B=C.shift();if(l.relative[B]){B+=C.shift();}J=t(B,J);}}}else{if(!F&&C.length>1&&e.nodeType===9&&!z&&l.match.ID.test(C[0])&&!l.match.ID.test(C[C.length-1])){var I=c.find(C.shift(),e,z);e=I.expr?c.filter(I.expr,I.set)[0]:I.set[0];}if(e){var I=F?{expr:C.pop(),set:n(F)}:c.find(C.pop(),C.length===1&&(C[0]==="~"||C[0]==="+")&&e.parentNode?e.parentNode:e,z);J=I.expr?c.filter(I.expr,I.set):I.set;if(C.length>0){M=n(J);}else{A=false;}while(C.length){var L=C.pop(),K=L;if(!l.relative[L]){L="";}else{K=C.pop();}if(K==null){K=e;}l.relative[L](M,K,z);}}else{M=C=[];}}if(!M){M=J;}if(!M){throw"Syntax error, unrecognized expression: "+(L||B);}if(s.call(M)==="[object Array]"){if(!A){E.push.apply(E,M);}else{if(e&&e.nodeType===1){for(var D=0;M[D]!=null;D++){if(M[D]&&(M[D]===true||M[D].nodeType===1&&m(e,M[D]))){E.push(J[D]);}}}else{for(var D=0;M[D]!=null;D++){if(M[D]&&M[D].nodeType===1){E.push(J[D]);}}}}}else{n(M,E);}if(w){c(w,H,E,F);c.uniqueSort(E);}return E;};c.uniqueSort=function(w){if(q){h=g;w.sort(q);if(h){for(var e=1;e<w.length;e++){if(w[e]===w[e-1]){w.splice(e--,1);}}}}return w;};c.matches=function(e,w){return c(e,null,null,w);};c.find=function(D,e,E){var C,A;if(!D){return[];}for(var z=0,y=l.order.length;z<y;z++){var B=l.order[z],A;if((A=l.leftMatch[B].exec(D))){var w=A[1];A.splice(1,1);if(w.substr(w.length-1)!=="\\"){A[1]=(A[1]||"").replace(/\\/g,"");C=l.find[B](A,e,E);if(C!=null){D=D.replace(l.match[B],"");break;}}}}if(!C){C=e.getElementsByTagName("*");}return{set:C,expr:D};};c.filter=function(G,F,J,z){var y=G,L=[],D=F,B,e,C=F&&F[0]&&d(F[0]);while(G&&F.length){for(var E in l.filter){if((B=l.match[E].exec(G))!=null){var w=l.filter[E],K,I;e=false;if(D==L){L=[];}if(l.preFilter[E]){B=l.preFilter[E](B,D,J,L,z,C);if(!B){e=K=true;}else{if(B===true){continue;}}}if(B){for(var A=0;(I=D[A])!=null;A++){if(I){K=w(I,B,A,D);var H=z^!!K;if(J&&K!=null){if(H){e=true;}else{D[A]=false;}}else{if(H){L.push(I);e=true;}}}}}if(K!==undefined){if(!J){D=L;}G=G.replace(l.match[E],"");if(!e){return[];}break;}}}if(G==y){if(e==null){throw"Syntax error, unrecognized expression: "+G;}else{break;}}y=G;}return D;};var l=c.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF-]|\\.)+)(?:\((['"]*)((?:\([^\)]+\)|[^\2\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href");}},relative:{"+":function(C,w){var z=typeof w==="string",B=z&&!/\W/.test(w),D=z&&!B;if(B){w=w.toLowerCase();}for(var y=0,e=C.length,A;y<e;y++){if((A=C[y])){while((A=A.previousSibling)&&A.nodeType!==1){}C[y]=D||A&&A.nodeName.toLowerCase()===w?A||false:A===w;}}if(D){c.filter(w,C,true);}},">":function(C,w){var A=typeof w==="string";if(A&&!/\W/.test(w)){w=w.toLowerCase();for(var y=0,e=C.length;y<e;y++){var B=C[y];if(B){var z=B.parentNode;C[y]=z.nodeName.toLowerCase()===w?z:false;}}}else{for(var y=0,e=C.length;y<e;y++){var B=C[y];if(B){C[y]=A?B.parentNode:B.parentNode===w;}}if(A){c.filter(w,C,true);}}},"":function(z,w){var y=p++,e=u;if(!/\W/.test(w)){var A=w=w.toLowerCase();e=a;}e("parentNode",w,y,z,A,d);},"~":function(z,w){var y=p++,e=u;if(typeof w==="string"&&!/\W/.test(w)){var A=w=w.toLowerCase();e=a;}e("previousSibling",w,y,z,A,d);}},find:{ID:function(w,y,z){if(typeof y.getElementById!=="undefined"&&!z){var e=y.getElementById(w[1]);return e?[e]:[];}},NAME:function(y,B){if(typeof B.getElementsByName!=="undefined"){var w=[],A=B.getElementsByName(y[1]);for(var z=0,e=A.length;z<e;z++){if(A[z].getAttribute("name")===y[1]){w.push(A[z]);}}return w.length===0?null:w;}},TAG:function(e,w){return w.getElementsByTagName(e[1]);}},preFilter:{CLASS:function(z,w,y,e,C,D){z=" "+z[1].replace(/\\/g,"")+" ";if(D){return z;}for(var A=0,B;(B=w[A])!=null;A++){if(B){if(C^(B.className&&(" "+B.className+" ").replace(/[\t\n]/g," ").indexOf(z)>=0)){if(!y){e.push(B);}}else{if(y){w[A]=false;}}}}return false;},ID:function(e){return e[1].replace(/\\/g,"");},TAG:function(w,e){return w[1].toLowerCase();},CHILD:function(e){if(e[1]=="nth"){var w=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(e[2]=="even"&&"2n"||e[2]=="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=(w[1]+(w[2]||1))-0;e[3]=w[3]-0;}e[0]=p++;return e;},ATTR:function(A,w,y,e,B,C){var z=A[1].replace(/\\/g,"");if(!C&&l.attrMap[z]){A[1]=l.attrMap[z];}if(A[2]==="~="){A[4]=" "+A[4]+" ";}return A;},PSEUDO:function(A,w,y,e,B){if(A[1]==="not"){if((o.exec(A[3])||"").length>1||/^\w/.test(A[3])){A[3]=c(A[3],null,null,w);}else{var z=c.filter(A[3],w,y,true^B);if(!y){e.push.apply(e,z);}return false;}}else{if(l.match.POS.test(A[0])||l.match.CHILD.test(A[0])){return true;}}return A;},POS:function(e){e.unshift(true);return e;}},filters:{enabled:function(e){return e.disabled===false&&e.type!=="hidden";},disabled:function(e){return e.disabled===true;},checked:function(e){return e.checked===true;},selected:function(e){e.parentNode.selectedIndex;return e.selected===true;},parent:function(e){return !!e.firstChild;},empty:function(e){return !e.firstChild;},has:function(y,w,e){return !!c(e[3],y).length;},header:function(e){return/h\d/i.test(e.nodeName);},text:function(e){return"text"===e.type;},radio:function(e){return"radio"===e.type;},checkbox:function(e){return"checkbox"===e.type;},file:function(e){return"file"===e.type;},password:function(e){return"password"===e.type;},submit:function(e){return"submit"===e.type;},image:function(e){return"image"===e.type;},reset:function(e){return"reset"===e.type;},button:function(e){return"button"===e.type||e.nodeName.toLowerCase()==="button";},input:function(e){return/input|select|textarea|button/i.test(e.nodeName);}},setFilters:{first:function(w,e){return e===0;},last:function(y,w,e,z){return w===z.length-1;},even:function(w,e){return e%2===0;},odd:function(w,e){return e%2===1;},lt:function(y,w,e){return w<e[3]-0;},gt:function(y,w,e){return w>e[3]-0;},nth:function(y,w,e){return e[3]-0==w;},eq:function(y,w,e){return e[3]-0==w;}},filter:{PSEUDO:function(C,y,z,D){var w=y[1],A=l.filters[w];if(A){return A(C,z,y,D);}else{if(w==="contains"){return(C.textContent||C.innerText||b([C])||"").indexOf(y[3])>=0;}else{if(w==="not"){var B=y[3];for(var z=0,e=B.length;z<e;z++){if(B[z]===C){return false;}}return true;}}}},CHILD:function(e,z){var C=z[1],w=e;switch(C){case"only":case"first":while((w=w.previousSibling)){if(w.nodeType===1){return false;}}if(C=="first"){return true;}w=e;case"last":while((w=w.nextSibling)){if(w.nodeType===1){return false;}}return true;case"nth":var y=z[2],F=z[3];if(y==1&&F==0){return true;}var B=z[0],E=e.parentNode;if(E&&(E.sizcache!==B||!e.nodeIndex)){var A=0;for(w=E.firstChild;w;w=w.nextSibling){if(w.nodeType===1){w.nodeIndex=++A;}}E.sizcache=B;}var D=e.nodeIndex-F;if(y==0){return D==0;}else{return(D%y==0&&D/y>=0);}}},ID:function(w,e){return w.nodeType===1&&w.getAttribute("id")===e;},TAG:function(w,e){return(e==="*"&&w.nodeType===1)||w.nodeName.toLowerCase()===e;},CLASS:function(w,e){return(" "+(w.className||w.getAttribute("class"))+" ").indexOf(e)>-1;},ATTR:function(B,z){var y=z[1],e=l.attrHandle[y]?l.attrHandle[y](B):B[y]!=null?B[y]:B.getAttribute(y),C=e+"",A=z[2],w=z[4];return e==null?A==="!=":A==="="?C===w:A==="*="?C.indexOf(w)>=0:A==="~="?(" "+C+" ").indexOf(w)>=0:!w?C&&e!==false:A==="!="?C!=w:A==="^="?C.indexOf(w)===0:A==="$="?C.substr(C.length-w.length)===w:A==="|="?C===w||C.substr(0,w.length+1)===w+"-":false;},POS:function(A,w,y,B){var e=w[2],z=l.setFilters[e];if(z){return z(A,y,w,B);}}}};var j=l.match.POS;for(var f in l.match){l.match[f]=new RegExp(l.match[f].source+/(?![^\[]*\])(?![^\(]*\))/.source);l.leftMatch[f]=new RegExp(/(^(?:.|\r|\n)*?)/.source+l.match[f].source);}var n=function(w,e){w=Array.prototype.slice.call(w,0);if(e){e.push.apply(e,w);return e;}return w;};try{Array.prototype.slice.call(document.documentElement.childNodes,0);}catch(v){n=function(A,z){var w=z||[];if(s.call(A)==="[object Array]"){Array.prototype.push.apply(w,A);}else{if(typeof A.length==="number"){for(var y=0,e=A.length;y<e;y++){w.push(A[y]);}}else{for(var y=0;A[y];y++){w.push(A[y]);}}}return w;};}var q;if(document.documentElement.compareDocumentPosition){q=function(w,e){if(!w.compareDocumentPosition||!e.compareDocumentPosition){if(w==e){h=true;}return w.compareDocumentPosition?-1:1;}var y=w.compareDocumentPosition(e)&4?-1:w===e?0:1;if(y===0){h=true;}return y;};}else{if("sourceIndex" in document.documentElement){q=function(w,e){if(!w.sourceIndex||!e.sourceIndex){if(w==e){h=true;}return w.sourceIndex?-1:1;}var y=w.sourceIndex-e.sourceIndex;if(y===0){h=true;}return y;};}else{if(document.createRange){q=function(z,w){if(!z.ownerDocument||!w.ownerDocument){if(z==w){h=true;}return z.ownerDocument?-1:1;}var y=z.ownerDocument.createRange(),e=w.ownerDocument.createRange();y.setStart(z,0);y.setEnd(z,0);e.setStart(w,0);e.setEnd(w,0);var A=y.compareBoundaryPoints(Range.START_TO_END,e);if(A===0){h=true;}return A;};}}}function b(e){var w="",z;for(var y=0;e[y];y++){z=e[y];if(z.nodeType===3||z.nodeType===4){w+=z.nodeValue;}else{if(z.nodeType!==8){w+=b(z.childNodes);}}}return w;}(function(){var w=document.createElement("div"),y="script"+(new Date).getTime();w.innerHTML="<a name='"+y+"'/>";var e=document.documentElement;e.insertBefore(w,e.firstChild);if(document.getElementById(y)){l.find.ID=function(A,B,C){if(typeof B.getElementById!=="undefined"&&!C){var z=B.getElementById(A[1]);return z?z.id===A[1]||typeof z.getAttributeNode!=="undefined"&&z.getAttributeNode("id").nodeValue===A[1]?[z]:undefined:[];}};l.filter.ID=function(B,z){var A=typeof B.getAttributeNode!=="undefined"&&B.getAttributeNode("id");return B.nodeType===1&&A&&A.nodeValue===z;};}e.removeChild(w);e=w=null;})();(function(){var e=document.createElement("div");e.appendChild(document.createComment(""));if(e.getElementsByTagName("*").length>0){l.find.TAG=function(w,B){var A=B.getElementsByTagName(w[1]);if(w[1]==="*"){var z=[];for(var y=0;A[y];y++){if(A[y].nodeType===1){z.push(A[y]);}}A=z;}return A;};}e.innerHTML="<a href='#'></a>";if(e.firstChild&&typeof e.firstChild.getAttribute!=="undefined"&&e.firstChild.getAttribute("href")!=="#"){l.attrHandle.href=function(w){return w.getAttribute("href",2);};}e=null;})();if(document.querySelectorAll){(function(){var e=c,y=document.createElement("div");y.innerHTML="<p class='TEST'></p>";if(y.querySelectorAll&&y.querySelectorAll(".TEST").length===0){return;}c=function(C,B,z,A){B=B||document;if(!A&&B.nodeType===9&&!d(B)){try{return n(B.querySelectorAll(C),z);}catch(D){}}return e(C,B,z,A);};for(var w in e){c[w]=e[w];}y=null;})();}(function(){var e=document.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!e.getElementsByClassName||e.getElementsByClassName("e").length===0){return;}e.lastChild.className="e";if(e.getElementsByClassName("e").length===1){return;}l.order.splice(1,0,"CLASS");l.find.CLASS=function(w,y,z){if(typeof y.getElementsByClassName!=="undefined"&&!z){return y.getElementsByClassName(w[1]);}};e=null;})();function a(w,C,B,G,D,F){var E=w=="previousSibling"&&!F;for(var z=0,y=G.length;z<y;z++){var e=G[z];if(e){if(E&&e.nodeType===1){e.sizcache=B;e.sizset=z;}e=e[w];var A=false;while(e){if(e.sizcache===B){A=G[e.sizset];break;}if(e.nodeType===1&&!F){e.sizcache=B;e.sizset=z;}if(e.nodeName.toLowerCase()===C){A=e;break;}e=e[w];}G[z]=A;}}}function u(w,C,B,G,D,F){var E=w=="previousSibling"&&!F;for(var z=0,y=G.length;z<y;z++){var e=G[z];if(e){if(E&&e.nodeType===1){e.sizcache=B;e.sizset=z;}e=e[w];var A=false;while(e){if(e.sizcache===B){A=G[e.sizset];break;}if(e.nodeType===1){if(!F){e.sizcache=B;e.sizset=z;}if(typeof C!=="string"){if(e===C){A=true;break;}}else{if(c.filter(C,[e]).length>0){A=e;break;}}}e=e[w];}G[z]=A;}}}var m=document.compareDocumentPosition?function(w,e){return w.compareDocumentPosition(e)&16;}:function(w,e){return w!==e&&(w.contains?w.contains(e):true);};var d=function(e){var w=(e?e.ownerDocument||e:0).documentElement;return w?w.nodeName!=="HTML":false;};var t=function(e,D){var z=[],A="",B,y=D.nodeType?[D]:D;while((B=l.match.PSEUDO.exec(e))){A+=B[0];e=e.replace(l.match.PSEUDO,"");}e=l.relative[e]?e+"*":e;for(var C=0,w=y.length;C<w;C++){c(e,y[C],z);}return c.filter(A,z);};window.Sizzle=c;})();(function(){var o=this;var j=o._;var a=function(l){this._wrapped=l;};var g=typeof StopIteration!=="undefined"?StopIteration:"__break__";var q=o._=function(l){return new a(l);};if(typeof exports!=="undefined"){exports._=q;}var p=Array.prototype.slice,f=Array.prototype.unshift,b=Object.prototype.toString,d=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;q.VERSION="0.5.1";q.each=function(B,y,w){var u=0;try{if(B.forEach){B.forEach(y,w);}else{if(q.isArray(B)||q.isArguments(B)){for(var v=0,t=B.length;v<t;v++){y.call(w,B[v],v,B);}}else{var z=q.keys(B),t=z.length;for(var v=0;v<t;v++){y.call(w,B[z[v]],z[v],B);}}}}catch(A){if(A!=g){throw A;}}return B;};q.map=function(v,u,t){if(v&&q.isFunction(v.map)){return v.map(u,t);}var l=[];q.each(v,function(z,w,y){l.push(u.call(t,z,w,y));});return l;};q.reduce=function(v,l,u,t){if(v&&q.isFunction(v.reduce)){return v.reduce(q.bind(u,t),l);}q.each(v,function(z,w,y){l=u.call(t,l,z,w,y);});return l;};q.reduceRight=function(v,l,u,t){if(v&&q.isFunction(v.reduceRight)){return v.reduceRight(q.bind(u,t),l);}var w=q.clone(q.toArray(v)).reverse();q.each(w,function(z,y){l=u.call(t,l,z,y,v);});return l;};q.detect=function(v,u,t){var l;q.each(v,function(z,w,y){if(u.call(t,z,w,y)){l=z;q.breakLoop();}});return l;};q.select=function(v,u,t){if(v&&q.isFunction(v.filter)){return v.filter(u,t);}var l=[];q.each(v,function(z,w,y){u.call(t,z,w,y)&&l.push(z);});return l;};q.reject=function(v,u,t){var l=[];q.each(v,function(z,w,y){!u.call(t,z,w,y)&&l.push(z);});return l;};q.all=function(v,u,t){u=u||q.identity;if(v&&q.isFunction(v.every)){return v.every(u,t);}var l=true;q.each(v,function(z,w,y){if(!(l=l&&u.call(t,z,w,y))){q.breakLoop();}});return l;};q.any=function(v,u,t){u=u||q.identity;if(v&&q.isFunction(v.some)){return v.some(u,t);}var l=false;q.each(v,function(z,w,y){if(l=u.call(t,z,w,y)){q.breakLoop();}});return l;};q.include=function(u,t){if(q.isArray(u)){return q.indexOf(u,t)!=-1;}var l=false;q.each(u,function(v){if(l=v===t){q.breakLoop();}});return l;};q.invoke=function(t,u){var l=q.rest(arguments,2);return q.map(t,function(v){return(u?v[u]:v).apply(v,l);});};q.pluck=function(t,l){return q.map(t,function(u){return u[l];});};q.max=function(v,u,t){if(!u&&q.isArray(v)){return Math.max.apply(Math,v);}var l={computed:-Infinity};q.each(v,function(A,w,z){var y=u?u.call(t,A,w,z):A;y>=l.computed&&(l={value:A,computed:y});});return l.value;};q.min=function(v,u,t){if(!u&&q.isArray(v)){return Math.min.apply(Math,v);}var l={computed:Infinity};q.each(v,function(A,w,z){var y=u?u.call(t,A,w,z):A;y<l.computed&&(l={value:A,computed:y});});return l.value;};q.sortBy=function(u,t,l){return q.pluck(q.map(u,function(y,v,w){return{value:y,criteria:t.call(l,y,v,w)};}).sort(function(z,y){var w=z.criteria,v=y.criteria;return w<v?-1:w>v?1:0;}),"value");};q.sortedIndex=function(y,w,u){u=u||q.identity;var l=0,v=y.length;while(l<v){var t=(l+v)>>1;u(y[t])<u(w)?l=t+1:v=t;}return l;};q.toArray=function(l){if(!l){return[];}if(l.toArray){return l.toArray();}if(q.isArray(l)){return l;}if(q.isArguments(l)){return p.call(l);}return q.map(l,function(t){return t;});};q.size=function(l){return q.toArray(l).length;};q.first=function(u,t,l){return t&&!l?p.call(u,0,t):u[0];};q.rest=function(u,l,t){return p.call(u,q.isUndefined(l)||t?1:l);};q.last=function(l){return l[l.length-1];};q.compact=function(l){return q.select(l,function(t){return !!t;});};q.flatten=function(l){return q.reduce(l,[],function(t,u){if(q.isArray(u)){return t.concat(q.flatten(u));}t.push(u);return t;});};q.without=function(t){var l=q.rest(arguments);return q.select(t,function(u){return !q.include(l,u);});};q.uniq=function(t,l){return q.reduce(t,[],function(u,w,v){if(0==v||(l===true?q.last(u)!=w:!q.include(u,w))){u.push(w);}return u;});};q.intersect=function(t){var l=q.rest(arguments);return q.select(q.uniq(t),function(u){return q.all(l,function(v){return q.indexOf(v,u)>=0;});});};q.zip=function(){var l=q.toArray(arguments);var v=q.max(q.pluck(l,"length"));var u=new Array(v);for(var t=0;t<v;t++){u[t]=q.pluck(l,String(t));}return u;};q.indexOf=function(w,v){if(w.indexOf){return w.indexOf(v);}for(var u=0,t=w.length;u<t;u++){if(w[u]===v){return u;}}return -1;};q.lastIndexOf=function(u,t){if(u.lastIndexOf){return u.lastIndexOf(t);}var l=u.length;while(l--){if(u[l]===t){return l;}}return -1;};q.range=function(l,z,t){var A=q.toArray(arguments);var y=A.length<=1;var l=y?0:A[0],z=y?A[0]:A[1],t=A[2]||1;var w=Math.ceil((z-l)/t);if(w<=0){return[];}var v=new Array(w);for(var u=l,B=0;true;u+=t){if((t>0?u-z:z-u)>=0){return v;}v[B++]=u;}};q.bind=function(t,u){var l=q.rest(arguments,2);return function(){return t.apply(u||o,l.concat(q.toArray(arguments)));};};q.bindAll=function(t){var l=q.rest(arguments);if(l.length==0){l=q.functions(t);}q.each(l,function(u){t[u]=q.bind(t[u],t);});return t;};q.delay=function(t,u){var l=q.rest(arguments,2);return setTimeout(function(){return t.apply(t,l);},u);};q.defer=function(l){return q.delay.apply(q,[l,1].concat(q.rest(arguments)));};q.wrap=function(l,t){return function(){var u=[l].concat(q.toArray(arguments));return t.apply(t,u);};};q.compose=function(){var l=q.toArray(arguments);return function(){var t=q.toArray(arguments);for(var u=l.length-1;u>=0;u--){t=[l[u].apply(this,t)];}return t[0];};};q.keys=function(u){if(q.isArray(u)){return q.range(0,u.length);}var t=[];for(var l in u){if(d.call(u,l)){t.push(l);}}return t;};q.values=function(l){return q.map(l,q.identity);};q.functions=function(l){return q.select(q.keys(l),function(t){return q.isFunction(l[t]);}).sort();};q.extend=function(l,u){for(var t in u){l[t]=u[t];}return l;};q.clone=function(l){if(q.isArray(l)){return l.slice(0);}return q.extend({},l);};q.isEqual=function(t,l){if(t===l){return true;}var w=typeof(t),z=typeof(l);if(w!=z){return false;}if(t==l){return true;}if((!t&&l)||(t&&!l)){return false;}if(t.isEqual){return t.isEqual(l);}if(q.isDate(t)&&q.isDate(l)){return t.getTime()===l.getTime();}if(q.isNaN(t)&&q.isNaN(l)){return true;}if(q.isRegExp(t)&&q.isRegExp(l)){return t.source===l.source&&t.global===l.global&&t.ignoreCase===l.ignoreCase&&t.multiline===l.multiline;}if(w!=="object"){return false;}if(t.length&&(t.length!==l.length)){return false;}var u=q.keys(t),y=q.keys(l);if(u.length!=y.length){return false;}for(var v in t){if(!q.isEqual(t[v],l[v])){return false;}}return true;};q.isEmpty=function(l){return q.keys(l).length==0;};q.isElement=function(l){return !!(l&&l.nodeType==1);};q.isArguments=function(l){return l&&q.isNumber(l.length)&&!q.isArray(l)&&!n.call(l,"length");};q.isNaN=function(l){return q.isNumber(l)&&isNaN(l);};q.isNull=function(l){return l===null;};q.isUndefined=function(l){return typeof l=="undefined";};var m=["Array","Date","Function","Number","RegExp","String"];for(var h=0,e=m.length;h<e;h++){(function(){var l="[object "+m[h]+"]";q["is"+m[h]]=function(t){return b.call(t)==l;};})();}q.noConflict=function(){o._=j;return this;};q.identity=function(l){return l;};q.breakLoop=function(){throw g;};var c=0;q.uniqueId=function(l){var t=c++;return l?l+t:t;};q.template=function(u,t){var l=new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+u.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return t?l(t):l;};q.forEach=q.each;q.foldl=q.inject=q.reduce;q.foldr=q.reduceRight;q.filter=q.select;q.every=q.all;q.some=q.any;q.head=q.first;q.tail=q.rest;q.methods=q.functions;var s=function(t,l){return l?q(t).chain():t;};q.each(q.functions(q),function(l){var t=q[l];a.prototype[l]=function(){f.call(arguments,this._wrapped);return s(t.apply(q,arguments),this._chain);};});q.each(["pop","push","reverse","shift","sort","splice","unshift"],function(l){var t=Array.prototype[l];a.prototype[l]=function(){t.apply(this._wrapped,arguments);return s(this._wrapped,this._chain);};});q.each(["concat","join","slice"],function(l){var t=Array.prototype[l];a.prototype[l]=function(){return s(t.apply(this._wrapped,arguments),this._chain);};});a.prototype.chain=function(){this._chain=true;return this;};a.prototype.value=function(){return this._wrapped;};})();shortcut={all_shortcuts:{},add:function(b,h,d){var g={type:"keydown",propagate:false,disable_in_input:false,target:document,keycode:false};if(!d){d=g;}else{for(var a in g){if(typeof d[a]=="undefined"){d[a]=g[a];}}}var f=d.target;if(typeof d.target=="string"){f=document.getElementById(d.target);}var c=this;b=b.toLowerCase();var e=function(o){o=o||window.event;if(d.disable_in_input){var l;if(o.target){l=o.target;}else{if(o.srcElement){l=o.srcElement;}}if(l.nodeType==3){l=l.parentNode;}if(l.tagName=="INPUT"||l.tagName=="TEXTAREA"){return;}}if(o.keyCode){code=o.keyCode;}else{if(o.which){code=o.which;}}var n=String.fromCharCode(code).toLowerCase();if(code==188){n=",";}if(code==190){n=".";}var t=b.split("+");var s=0;var p={"`":"~","1":"!","2":"@","3":"#","4":"$","5":"%","6":"^","7":"&","8":"*","9":"(","0":")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"};var m={esc:27,escape:27,tab:9,space:32,"return":13,enter:13,backspace:8,scrolllock:145,scroll_lock:145,scroll:145,capslock:20,caps_lock:20,caps:20,numlock:144,num_lock:144,num:144,pause:19,"break":19,insert:45,home:36,"delete":46,end:35,pageup:33,page_up:33,pu:33,pagedown:34,page_down:34,pd:34,left:37,up:38,right:39,down:40,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123};var q={shift:{wanted:false,pressed:false},ctrl:{wanted:false,pressed:false},alt:{wanted:false,pressed:false},meta:{wanted:false,pressed:false}};if(o.ctrlKey){q.ctrl.pressed=true;}if(o.shiftKey){q.shift.pressed=true;}if(o.altKey){q.alt.pressed=true;}if(o.metaKey){q.meta.pressed=true;}for(var j=0;k=t[j],j<t.length;j++){if(k=="ctrl"||k=="control"){s++;q.ctrl.wanted=true;}else{if(k=="shift"){s++;q.shift.wanted=true;}else{if(k=="alt"){s++;q.alt.wanted=true;}else{if(k=="meta"){s++;q.meta.wanted=true;}else{if(k.length>1){if(m[k]==code){s++;}}else{if(d.keycode){if(d.keycode==code){s++;}}else{if(n==k){s++;}else{if(p[n]&&o.shiftKey){n=p[n];if(n==k){s++;}}}}}}}}}}if(s==t.length&&q.ctrl.pressed==q.ctrl.wanted&&q.shift.pressed==q.shift.wanted&&q.alt.pressed==q.alt.wanted&&q.meta.pressed==q.meta.wanted){h(o);if(!d.propagate){o.cancelBubble=true;o.returnValue=false;if(o.stopPropagation){o.stopPropagation();o.preventDefault();}return false;}}};this.all_shortcuts[b]={callback:e,target:f,event:d.type};if(f.addEventListener){f.addEventListener(d.type,e,false);}else{if(f.attachEvent){f.attachEvent("on"+d.type,e);}else{f["on"+d.type]=e;}}},remove:function(a){a=a.toLowerCase();var d=this.all_shortcuts[a];delete (this.all_shortcuts[a]);if(!d){return;}var b=d.event;var c=d.target;var e=d.callback;if(c.detachEvent){c.detachEvent("on"+b,e);}else{if(c.removeEventListener){c.removeEventListener(b,e,false);}else{c["on"+b]=false;}}}};var jaaulde=window.jaaulde||{};jaaulde.utils=jaaulde.utils||{};jaaulde.utils.cookies=(function(){var e,d,c,b,a={expiresAt:null,path:"/",domain:null,secure:false};e=function(g){var h,f;if(typeof g!=="object"||g===null){h=a;}else{h={expiresAt:a.expiresAt,path:a.path,domain:a.domain,secure:a.secure};if(typeof g.expiresAt==="object"&&g.expiresAt instanceof Date){h.expiresAt=g.expiresAt;}else{if(typeof g.hoursToLive==="number"&&g.hoursToLive!==0){f=new Date();f.setTime(f.getTime()+(g.hoursToLive*60*60*1000));h.expiresAt=f;}}if(typeof g.path==="string"&&g.path!==""){h.path=g.path;}if(typeof g.domain==="string"&&g.domain!==""){h.domain=g.domain;}if(g.secure===true){h.secure=g.secure;}}return h;};d=function(f){f=e(f);return((typeof f.expiresAt==="object"&&f.expiresAt instanceof Date?"; expires="+f.expiresAt.toGMTString():"")+"; path="+f.path+(typeof f.domain==="string"?"; domain="+f.domain:"")+(f.secure===true?"; secure":""));};c=function(){var p={},h,g,f,o,l=document.cookie.split(";"),j;for(h=0;h<l.length;h=h+1){g=l[h].split("=");f=g[0].replace(/^\s*/,"").replace(/\s*$/,"");try{o=decodeURIComponent(g[1]);}catch(n){o=g[1];}if(typeof JSON==="object"&&JSON!==null&&typeof JSON.parse==="function"){try{j=o;o=JSON.parse(o);}catch(m){o=j;}}p[f]=o;}return p;};b=function(){};b.prototype.get=function(j){var f,h,g=c();if(typeof j==="string"){f=(typeof g[j]!=="undefined")?g[j]:null;}else{if(typeof j==="object"&&j!==null){f={};for(h in j){if(typeof g[j[h]]!=="undefined"){f[j[h]]=g[j[h]];}else{f[j[h]]=null;}}}else{f=g;}}return f;};b.prototype.filter=function(f){var j,g={},h=c();if(typeof f==="string"){f=new RegExp(f);}for(j in h){if(j.match(f)){g[j]=h[j];}}return g;};b.prototype.set=function(j,g,f){if(typeof f!=="object"||f===null){f={};}if(typeof g==="undefined"||g===null){g="";f.hoursToLive=-8760;}else{if(typeof g!=="string"){if(typeof JSON==="object"&&JSON!==null&&typeof JSON.stringify==="function"){g=JSON.stringify(g);}else{throw new Error("cookies.set() received non-string value and could not serialize.");}}}var h=d(f);document.cookie=j+"="+encodeURIComponent(g)+h;};b.prototype.del=function(j,h){var f={},g;if(typeof h!=="object"||h===null){h={};}if(typeof j==="boolean"&&j===true){f=this.get();}else{if(typeof j==="string"){f[j]=true;}}for(g in f){if(typeof g==="string"&&g!==""){this.set(g,null,h);}}};b.prototype.test=function(){var g=false,f="cT",h="data";this.set(f,h);if(this.get(f)===h){this.del(f);g=true;}return g;};b.prototype.setOptions=function(f){if(typeof f!=="object"){f=null;}a=e(f);};return new b();})();(function(){if(window.jQuery){(function(b){b.cookies=jaaulde.utils.cookies;var a={cookify:function(c){return this.each(function(){var e,g=["name","id"],d,h=b(this),f;for(e in g){if(!isNaN(e)){d=h.attr(g[e]);if(typeof d==="string"&&d!==""){if(h.is(":checkbox, :radio")){if(h.attr("checked")){f=h.val();}}else{if(h.is(":input")){f=h.val();}else{f=h.html();}}if(typeof f!=="string"||f===""){f=null;}b.cookies.set(d,f,c);break;}}}});},cookieFill:function(){return this.each(function(){var h,c,f=["name","id"],d,g=b(this),e;c=function(){h=f.pop();return !!h;};while(c()){d=g.attr(h);if(typeof d==="string"&&d!==""){e=b.cookies.get(d);if(e!==null){if(g.is(":checkbox, :radio")){if(g.val()===e){g.attr("checked","checked");}else{g.removeAttr("checked");}}else{if(g.is(":input")){g.val(e);}else{g.html(e);}}}break;}}});},cookieBind:function(c){return this.each(function(){var d=b(this);d.cookieFill().change(function(){d.cookify(c);});});}};b.each(a,function(c){b.fn[c]=this;});})(window.jQuery);}})();var sc;sc.helpers.getRelativeTime=function(e,g,d){var c={now:"Just now",seconds:"sec ago",minute:"min ago",minutes:"min ago",hour:"hr ago",hours:"hr ago",day:"day ago",days:"days ago"};g=sch.defaults(c,g);var a;if(d===true){a=new Date.parse(e);}else{a=new Date(e);}var b=new Date();var f=parseInt((b.getTime()-a.getTime())/1000,10);if(f<10){return g.now;}else{if(f<60){return f.toString()+" "+g.seconds;}else{if(f<120){return"1 "+g.minute;}else{if(f<(45*60)){return Math.round(parseInt(f/60,10)).toString()+" "+g.minutes;}else{if(f<(90*60)){return"1 "+g.hour;}else{if(f<(24*60*60)){if(Math.round(f/3600)===1){return"2 "+g.hours;}else{return Math.round(f/3600).toString()+" "+g.hours;}}else{if(f<(48*60*60)){return"1 "+g.day;}else{return Math.round(f/86400).toString()+" "+g.days;}}}}}}}};sc.helpers.httpTimeToInt=function(b,a){return sc.helpers.dateToInt(b,a);};sc.helpers.dateToInt=function(b,a){var c=new Date();if(a===true){b=new Date.parse(b);}else{b=new Date(b);}c.setTime(b);return c.getTime();};sc.helpers.getTimeAsInt=function(){var a=new Date();return a.getTime();};var sc;var SPAZCORE_EVENTDATA_ATTRIBUTE="sc_data";sc.helpers.addListener=function(e,f,d,c,b){sch.dump("listening for "+f);sch.dump("on target nodeName:"+e.nodeName);if(b!==true){b=false;}if(c){var a=_.bind(d,c);e.addEventListener(f,a,b);return a;}else{e.addEventListener(f,d,b);return d;}};sc.helpers.removeListener=function(c,d,b,a){sch.dump("removing listener for "+d);sch.dump("on target nodeName:"+c.nodeName);if(a!==true){a=false;}c.removeEventListener(d,b,a);};sc.helpers.addDelegatedListener=function(e,a,f,d,c){sch.dump("listening for "+f);sch.dump("on target nodeName:"+target.nodeName);sch.dump("for selector:"+a);if(use_capture!==true){use_capture=false;}if(c){var b=_.bind(d,c);target.addEventListener(f,b,use_capture);return b;}else{target.addEventListener(f,d,use_capture);return d;}};sc.helpers.removeDelegatedListener=function(e,a,f,d,c,b){};sc.helpers.triggerCustomEvent=function(e,d,c,a){sch.dump("triggering "+e);sch.dump("on target nodeName:"+d.nodeName);if(a!==false){a=true;}var b=document.createEvent("Events");b.initEvent(e,a,true);b[SPAZCORE_EVENTDATA_ATTRIBUTE]=c;d.dispatchEvent(b);};sc.helpers.getEventData=function(a){return a[SPAZCORE_EVENTDATA_ATTRIBUTE];};sc.helpers.listen=sc.helpers.addListener;sc.helpers.unlisten=sc.helpers.removeListener;sc.helpers.live=sc.helpers.addDelegatedListener;sc.helpers.die=sc.helpers.removeDelegatedListener;sc.helpers.trigger=sc.helpers.triggerCustomEvent;var sc;sc.helpers.Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(c){var a="";var l,h,f,j,g,e,d;var b=0;c=sc.helpers.Base64._utf8_encode(c);while(b<c.length){l=c.charCodeAt(b++);h=c.charCodeAt(b++);f=c.charCodeAt(b++);j=l>>2;g=((l&3)<<4)|(h>>4);e=((h&15)<<2)|(f>>6);d=f&63;if(isNaN(h)){e=d=64;}else{if(isNaN(f)){d=64;}}a=a+this._keyStr.charAt(j)+this._keyStr.charAt(g)+this._keyStr.charAt(e)+this._keyStr.charAt(d);}return a;},decode:function(c){var a="";var l,h,f;var j,g,e,d;var b=0;c=c.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(b<c.length){j=this._keyStr.indexOf(c.charAt(b++));g=this._keyStr.indexOf(c.charAt(b++));e=this._keyStr.indexOf(c.charAt(b++));d=this._keyStr.indexOf(c.charAt(b++));l=(j<<2)|(g>>4);h=((g&15)<<4)|(e>>2);f=((e&3)<<6)|d;a=a+String.fromCharCode(l);if(e!=64){a=a+String.fromCharCode(h);}if(d!=64){a=a+String.fromCharCode(f);}}a=sc.helpers.Base64._utf8_decode(a);return a;},_utf8_encode:function(b){b=b.replace(/\r\n/g,"\n");var a="";for(var e=0;e<b.length;e++){var d=b.charCodeAt(e);if(d<128){a+=String.fromCharCode(d);}else{if((d>127)&&(d<2048)){a+=String.fromCharCode((d>>6)|192);a+=String.fromCharCode((d&63)|128);}else{a+=String.fromCharCode((d>>12)|224);a+=String.fromCharCode(((d>>6)&63)|128);a+=String.fromCharCode((d&63)|128);}}}return a;},_utf8_decode:function(a){var d="";var f=0;var h=0,g=0,e=0,b=0;while(f<a.length){h=a.charCodeAt(f);if(h<128){d+=String.fromCharCode(h);f++;}else{if((h>191)&&(h<224)){e=a.charCodeAt(f+1);d+=String.fromCharCode(((h&31)<<6)|(e&63));f+=2;}else{e=a.charCodeAt(f+1);b=a.charCodeAt(f+2);d+=String.fromCharCode(((h&15)<<12)|((e&63)<<6)|(b&63));f+=3;}}}return d;}};sc.helpers.crc32=function(f){function c(j){j=j.replace(/\r\n/g,"\n");var h="";for(var m=0;m<j.length;m++){var l=j.charCodeAt(m);if(l<128){h+=String.fromCharCode(l);}else{if((l>127)&&(l<2048)){h+=String.fromCharCode((l>>6)|192);h+=String.fromCharCode((l&63)|128);}else{h+=String.fromCharCode((l>>12)|224);h+=String.fromCharCode(((l>>6)&63)|128);h+=String.fromCharCode((l&63)|128);}}}return h;}f=c(f);var d="00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D";if(typeof(crc)=="undefined"){crc=0;}var a=0;var g=0;crc=crc^(-1);for(var b=0,e=f.length;b<e;b++){g=(crc^f.charCodeAt(b))&255;a="0x"+d.substr(g*9,8);crc=(crc>>>8)^a;}return crc^(-1);};sc.helpers.MD5=function(u){function N(b,a){return(b<<a)|(b>>>(32-a));}function M(F,b){var H,a,d,G,c;d=(F&2147483648);G=(b&2147483648);H=(F&1073741824);a=(b&1073741824);c=(F&1073741823)+(b&1073741823);if(H&a){return(c^2147483648^d^G);}if(H|a){if(c&1073741824){return(c^3221225472^d^G);}else{return(c^1073741824^d^G);}}else{return(c^d^G);}}function t(a,c,b){return(a&c)|((~a)&b);}function s(a,c,b){return(a&b)|(c&(~b));}function q(a,c,b){return(a^c^b);}function o(a,c,b){return(c^(a|(~b)));}function w(H,G,ae,ad,F,I,ab){H=M(H,M(M(t(G,ae,ad),F),ab));return M(N(H,I),G);}function f(H,G,ae,ad,F,I,ab){H=M(H,M(M(s(G,ae,ad),F),ab));return M(N(H,I),G);}function J(H,G,ae,ad,F,I,ab){H=M(H,M(M(q(G,ae,ad),F),ab));return M(N(H,I),G);}function v(H,G,ae,ad,F,I,ab){H=M(H,M(M(o(G,ae,ad),F),ab));return M(N(H,I),G);}function e(F){var I;var d=F.length;var c=d+8;var b=(c-(c%64))/64;var H=(b+1)*16;var ab=Array(H-1);var a=0;var G=0;while(G<d){I=(G-(G%4))/4;a=(G%4)*8;ab[I]=(ab[I]|(F.charCodeAt(G)<<a));G++;}I=(G-(G%4))/4;a=(G%4)*8;ab[I]=ab[I]|(128<<a);ab[H-2]=d<<3;ab[H-1]=d>>>29;return ab;}function D(c){var b="",d="",F,a;for(a=0;a<=3;a++){F=(c>>>(a*8))&255;d="0"+F.toString(16);b=b+d.substr(d.length-2,2);}return b;}function L(b){b=b.replace(/\r\n/g,"\n");var a="";for(var F=0;F<b.length;F++){var d=b.charCodeAt(F);if(d<128){a+=String.fromCharCode(d);}else{if((d>127)&&(d<2048)){a+=String.fromCharCode((d>>6)|192);a+=String.fromCharCode((d&63)|128);}else{a+=String.fromCharCode((d>>12)|224);a+=String.fromCharCode(((d>>6)&63)|128);a+=String.fromCharCode((d&63)|128);}}}return a;}var E=Array();var R,h,K,y,g,aa,Z,Y,X;var U=7,S=12,P=17,O=22;var C=5,B=9,A=14,z=20;var p=4,n=11,m=16,l=23;var W=6,V=10,T=15,Q=21;u=L(u);E=e(u);aa=1732584193;Z=4023233417;Y=2562383102;X=271733878;for(R=0;R<E.length;R+=16){h=aa;K=Z;y=Y;g=X;aa=w(aa,Z,Y,X,E[R+0],U,3614090360);X=w(X,aa,Z,Y,E[R+1],S,3905402710);Y=w(Y,X,aa,Z,E[R+2],P,606105819);Z=w(Z,Y,X,aa,E[R+3],O,3250441966);aa=w(aa,Z,Y,X,E[R+4],U,4118548399);X=w(X,aa,Z,Y,E[R+5],S,1200080426);Y=w(Y,X,aa,Z,E[R+6],P,2821735955);Z=w(Z,Y,X,aa,E[R+7],O,4249261313);aa=w(aa,Z,Y,X,E[R+8],U,1770035416);X=w(X,aa,Z,Y,E[R+9],S,2336552879);Y=w(Y,X,aa,Z,E[R+10],P,4294925233);Z=w(Z,Y,X,aa,E[R+11],O,2304563134);aa=w(aa,Z,Y,X,E[R+12],U,1804603682);X=w(X,aa,Z,Y,E[R+13],S,4254626195);Y=w(Y,X,aa,Z,E[R+14],P,2792965006);Z=w(Z,Y,X,aa,E[R+15],O,1236535329);aa=f(aa,Z,Y,X,E[R+1],C,4129170786);X=f(X,aa,Z,Y,E[R+6],B,3225465664);Y=f(Y,X,aa,Z,E[R+11],A,643717713);Z=f(Z,Y,X,aa,E[R+0],z,3921069994);aa=f(aa,Z,Y,X,E[R+5],C,3593408605);X=f(X,aa,Z,Y,E[R+10],B,38016083);Y=f(Y,X,aa,Z,E[R+15],A,3634488961);Z=f(Z,Y,X,aa,E[R+4],z,3889429448);aa=f(aa,Z,Y,X,E[R+9],C,568446438);X=f(X,aa,Z,Y,E[R+14],B,3275163606);Y=f(Y,X,aa,Z,E[R+3],A,4107603335);Z=f(Z,Y,X,aa,E[R+8],z,1163531501);aa=f(aa,Z,Y,X,E[R+13],C,2850285829);X=f(X,aa,Z,Y,E[R+2],B,4243563512);Y=f(Y,X,aa,Z,E[R+7],A,1735328473);Z=f(Z,Y,X,aa,E[R+12],z,2368359562);aa=J(aa,Z,Y,X,E[R+5],p,4294588738);X=J(X,aa,Z,Y,E[R+8],n,2272392833);Y=J(Y,X,aa,Z,E[R+11],m,1839030562);Z=J(Z,Y,X,aa,E[R+14],l,4259657740);aa=J(aa,Z,Y,X,E[R+1],p,2763975236);X=J(X,aa,Z,Y,E[R+4],n,1272893353);Y=J(Y,X,aa,Z,E[R+7],m,4139469664);Z=J(Z,Y,X,aa,E[R+10],l,3200236656);aa=J(aa,Z,Y,X,E[R+13],p,681279174);X=J(X,aa,Z,Y,E[R+0],n,3936430074);Y=J(Y,X,aa,Z,E[R+3],m,3572445317);Z=J(Z,Y,X,aa,E[R+6],l,76029189);aa=J(aa,Z,Y,X,E[R+9],p,3654602809);X=J(X,aa,Z,Y,E[R+12],n,3873151461);Y=J(Y,X,aa,Z,E[R+15],m,530742520);Z=J(Z,Y,X,aa,E[R+2],l,3299628645);aa=v(aa,Z,Y,X,E[R+0],W,4096336452);X=v(X,aa,Z,Y,E[R+7],V,1126891415);Y=v(Y,X,aa,Z,E[R+14],T,2878612391);Z=v(Z,Y,X,aa,E[R+5],Q,4237533241);aa=v(aa,Z,Y,X,E[R+12],W,1700485571);X=v(X,aa,Z,Y,E[R+3],V,2399980690);Y=v(Y,X,aa,Z,E[R+10],T,4293915773);Z=v(Z,Y,X,aa,E[R+1],Q,2240044497);aa=v(aa,Z,Y,X,E[R+8],W,1873313359);X=v(X,aa,Z,Y,E[R+15],V,4264355552);Y=v(Y,X,aa,Z,E[R+6],T,2734768916);Z=v(Z,Y,X,aa,E[R+13],Q,1309151649);aa=v(aa,Z,Y,X,E[R+4],W,4149444226);X=v(X,aa,Z,Y,E[R+11],V,3174756917);Y=v(Y,X,aa,Z,E[R+2],T,718787259);Z=v(Z,Y,X,aa,E[R+9],Q,3951481745);aa=M(aa,h);Z=M(Z,K);Y=M(Y,y);X=M(X,g);}var j=D(aa)+D(Z)+D(Y)+D(X);return j.toLowerCase();};sc.helpers.SHA1=function(e){function d(B,A){var j=(B<<A)|(B>>>(32-A));return j;}function u(C){var B="";var j;var D;var A;for(j=0;j<=6;j+=2){D=(C>>>(j*4+4))&15;A=(C>>>(j*4))&15;B+=D.toString(16)+A.toString(16);}return B;}function w(C){var B="";var A;var j;for(A=7;A>=0;A--){j=(C>>>(A*4))&15;B+=j.toString(16);}return B;}function b(A){A=A.replace(/\r\n/g,"\n");var j="";for(var C=0;C<A.length;C++){var B=A.charCodeAt(C);if(B<128){j+=String.fromCharCode(B);}else{if((B>127)&&(B<2048)){j+=String.fromCharCode((B>>6)|192);j+=String.fromCharCode((B&63)|128);}else{j+=String.fromCharCode((B>>12)|224);j+=String.fromCharCode(((B>>6)&63)|128);j+=String.fromCharCode((B&63)|128);}}}return j;}var h;var z,y;var c=new Array(80);var o=1732584193;var m=4023233417;var l=2562383102;var g=271733878;var f=3285377520;var v,t,s,q,p;var F;e=b(e);var a=e.length;var n=[];for(z=0;z<a-3;z+=4){y=e.charCodeAt(z)<<24|e.charCodeAt(z+1)<<16|e.charCodeAt(z+2)<<8|e.charCodeAt(z+3);n.push(y);}switch(a%4){case 0:z=2147483648;break;case 1:z=e.charCodeAt(a-1)<<24|8388608;break;case 2:z=e.charCodeAt(a-2)<<24|e.charCodeAt(a-1)<<16|32768;break;case 3:z=e.charCodeAt(a-3)<<24|e.charCodeAt(a-2)<<16|e.charCodeAt(a-1)<<8|128;break;}n.push(z);while((n.length%16)!=14){n.push(0);}n.push(a>>>29);n.push((a<<3)&4294967295);for(h=0;h<n.length;h+=16){for(z=0;z<16;z++){c[z]=n[h+z];}for(z=16;z<=79;z++){c[z]=d(c[z-3]^c[z-8]^c[z-14]^c[z-16],1);}v=o;t=m;s=l;q=g;p=f;for(z=0;z<=19;z++){F=(d(v,5)+((t&s)|(~t&q))+p+c[z]+1518500249)&4294967295;p=q;q=s;s=d(t,30);t=v;v=F;}for(z=20;z<=39;z++){F=(d(v,5)+(t^s^q)+p+c[z]+1859775393)&4294967295;p=q;q=s;s=d(t,30);t=v;v=F;}for(z=40;z<=59;z++){F=(d(v,5)+((t&s)|(t&q)|(s&q))+p+c[z]+2400959708)&4294967295;p=q;q=s;s=d(t,30);t=v;v=F;}for(z=60;z<=79;z++){F=(d(v,5)+(t^s^q)+p+c[z]+3395469782)&4294967295;p=q;q=s;s=d(t,30);t=v;v=F;}o=(o+v)&4294967295;m=(m+t)&4294967295;l=(l+s)&4294967295;g=(g+q)&4294967295;f=(f+p)&4294967295;}F=w(o)+w(m)+w(l)+w(g)+w(f);return F.toLowerCase();};sc.helpers.SHA256=function(t){var m=8;var p=0;function j(s,w){var v=(s&65535)+(w&65535);var u=(s>>16)+(w>>16)+(v>>16);return(u<<16)|(v&65535);}function e(u,s){return(u>>>s)|(u<<(32-s));}function f(u,s){return(u>>>s);}function a(s,v,u){return((s&v)^((~s)&u));}function d(s,v,u){return((s&v)^(s&u)^(v&u));}function g(s){return(e(s,2)^e(s,13)^e(s,22));}function b(s){return(e(s,6)^e(s,11)^e(s,25));}function q(s){return(e(s,7)^e(s,18)^f(s,3));}function l(s){return(e(s,17)^e(s,19)^f(s,10));}function c(u,v){var I=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];var w=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];var s=[64];var L,J,H,G,E,C,B,A,z,y;var F,D;u[v>>5]|=128<<(24-v%32);u[((v+64>>9)<<4)+15]=v;for(z=0;z<u.length;z+=16){L=w[0];J=w[1];H=w[2];G=w[3];E=w[4];C=w[5];B=w[6];A=w[7];for(y=0;y<64;y++){if(y<16){s[y]=u[y+z];}else{s[y]=j(j(j(l(s[y-2]),s[y-7]),q(s[y-15])),s[y-16]);}F=j(j(j(j(A,b(E)),a(E,C,B)),I[y]),s[y]);D=j(g(L),d(L,J,H));A=B;B=C;C=E;E=j(G,F);G=H;H=J;J=L;L=j(F,D);}w[0]=j(L,w[0]);w[1]=j(J,w[1]);w[2]=j(H,w[2]);w[3]=j(G,w[3]);w[4]=j(E,w[4]);w[5]=j(C,w[5]);w[6]=j(B,w[6]);w[7]=j(A,w[7]);}return w;}function h(w){var v=Array();var s=(1<<m)-1;for(var u=0;u<w.length*m;u+=m){v[u>>5]|=(w.charCodeAt(u/m)&s)<<(24-u%32);}return v;}function o(u){u=u.replace(/\r\n/g,"\n");var s="";for(var w=0;w<u.length;w++){var v=u.charCodeAt(w);if(v<128){s+=String.fromCharCode(v);}else{if((v>127)&&(v<2048)){s+=String.fromCharCode((v>>6)|192);s+=String.fromCharCode((v&63)|128);}else{s+=String.fromCharCode((v>>12)|224);s+=String.fromCharCode(((v>>6)&63)|128);s+=String.fromCharCode((v&63)|128);}}}return s;}function n(v){var u=p?"0123456789ABCDEF":"0123456789abcdef";var w="";for(var s=0;s<v.length*4;s++){w+=u.charAt((v[s>>2]>>((3-s%4)*8+4))&15)+u.charAt((v[s>>2]>>((3-s%4)*8))&15);}return w;}t=o(t);return n(c(h(t),t.length*m));};sc.helpers.UUID=(function(){var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");return function(b,f){var h=a,e=[],d=Math.random;f=f||h.length;if(b){for(var c=0;c<b;c++){e[c]=h[0|d()*f];}}else{var g;e[8]=e[13]=e[18]=e[23]="-";e[14]="4";for(var c=0;c<36;c++){if(!e[c]){g=0|d()*16;e[c]=h[(c==19)?(g&3)|8:g&15];}}}return e.join("");};})();sc.helpers.isUUID=function(a){return a.match(/^[0-9A-Z]{8}-[0-9A-Z]{4}-[0-9A-Z]{4}-[0-9A-Z]{4}-[0-9A-Z]{12}$/);};var sc,jQuery;sc.helpers.isString=function(a){if(typeof a==="string"){return true;}if(typeof a==="object"&&a!==null){var b=a.constructor.toString().match(/string/i);return(b!==null);}return false;};sc.helpers.isNumber=function(a){return typeof a==="number";};sc.helpers.isArray=function(a){if(a.constructor.toString().indexOf("Array")===-1){return false;}else{return true;}};sc.helpers.clone=function(a){return _.extend({},a);};sc.helpers.each=function(a,b){};sc.helpers.extend=function(b,a){b.prototype.__proto__=a.prototype;};sc.helpers.defaults=function(c,d){var a=c;for(var b in d){a[b]=d[b];}return a;};var sc;sc.helpers.deJSON=function(b){var a=false;try{var c=JSON.parse(b);a=true;}finally{if(!a){sc.helpers.dump("Could not parse JSON text "+b);}}return c;};sc.helpers.enJSON=function(a){return JSON.stringify(a);};sc.helpers.xml2json=function(f,a){if(!f){return{};}function d(l,j){if(!l){return null;}var o="",n=null,s=null;var q=l.nodeType,t=g(l.localName||l.nodeName);var p=l.text||l.nodeValue||"";if(l.childNodes){if(l.childNodes.length>0){jQuery.each(l.childNodes,function(z,y){var v=y.nodeType,w=g(y.localName||y.nodeName);var u=y.text||y.nodeValue||"";if(v==8){return;}else{if(v==3||v==4||!w){if(u.match(/^\s+$/)){return;}o+=u.replace(/^\s+/,"").replace(/\s+$/,"");}else{n=n||{};if(n[w]){if(!n[w].length){n[w]=c(n[w]);}n[w][n[w].length]=d(y,true);n[w].length=n[w].length;}else{n[w]=d(y);}}}});}}if(l.attributes){if(l.attributes.length>0){s={};n=n||{};jQuery.each(l.attributes,function(w,v){var y=g(v.name),u=v.value;s[y]=u;if(n[y]){if(!n[y].length){n[y]=c(n[y]);}n[y][n[y].length]=u;n[y].length=n[y].length;}else{n[y]=u;}});}}if(n){n=jQuery.extend((o!=""?new String(o):{}),n||{});o=(n.text)?(typeof(n.text)=="object"?n.text:[n.text||""]).concat([o]):o;if(o){n.text=o;}o="";}var m=n||o;if(a){if(o){m={};}o=m.text||o||"";if(o){m.text=o;}if(!j){m=c(m);}}return m;}var g=function(j){return String(j||"").replace(/-/g,"_");};var h=function(j){return(typeof j=="number")||String((j&&typeof j=="string")?j:"").test(/^((-)?([0-9]*)((\.{0,1})([0-9]+))?$)/);};var c=function(j){if(!j.length){j=[j];}j.length=j.length;return j;};if(typeof f=="string"){f=sc.helpers.createXMLFromString(f);}if(!f.nodeType){return;}if(f.nodeType==3||f.nodeType==4){return f.nodeValue;}var b=(f.nodeType==9)?f.documentElement:f;var e=d(b,true);f=null;b=null;return e;};var sc,DOMParser,shortcut;sc.helpers.key_add=function(c,b,a){a=sch.defaults({type:"keydown",disable_in_input:"true"},a);shortcut.add(c,b,a);};sc.helpers.key_remove=function(a){shortcut.remove(a);};sc.helpers.getModKey=function(){};var sc;sc.helpers.getCurrentLocation=function(){};var sc;sc.helpers.containsScreenName=function(c,b){var a=new RegExp("(?:\\s|\\b|^[[:alnum:]]|^)@("+b+")(?:\\s|\\b|$)","gi");if(a.test(c)){return true;}return false;};sc.helpers.extractURLs=function(d){var a=/(^|\s|\(|:)(((http(s?):\/\/)|(www\.))(\w+[^\s\)<]+))/gi;var c=[];var b=[];while((c=a.exec(d))!==null){b.push(c[2]);}return b;};sc.helpers.replaceMultiple=function(c,b){for(var a in b){c=c.replace(a,b[a]);}return c;};sc.helpers.autolink=function(g,h,b,c){if(!h){h="both";}var m=/((^|\s)(www\.)?([a-zA-Z_\-]+\.)(com|net|org|uk)($|\s))/gi;var l=/(^|[\s\(:])((http(s?):\/\/)|(www\.))(\w+[^\s\)<]+)/gi;var n=/(^|\s|\()([a-zA-Z0-9_\.\-\+]+)@([a-zA-Z0-9\-]+)\.([a-zA-Z0-9\-\.]*)([^\s\)<]+)/gi;var j,a,f="";if(h!=="email"){while((a=m.exec(g))){for(j=0;j<a.length;j++){if(!a[j]){a[j]="";}}if(b){b=" "+b;}else{b="";}var d=a[3]+a[4]+a[5];if(c&&c>0&&d.length>c){d=d.substr(0,c)+"...";}var e=a[2]+'<a href="http://'+a[3]+a[4]+a[5]+'"'+b+">"+d+"</a>"+a[6];sch.error(e);g=g.replace(a[0],e);}while((a=l.exec(g))){if(/\.$/.test(a[6])){f=".";a[6]=a[6].slice(0,-1);}for(j=0;j<a.length;j++){if(!a[j]){a[j]="";}}if(b){b=" "+b;}else{b="";}var d=a[5]+a[6];if(c&&c>0&&d.length>c){d=d.substr(0,c)+"...";}var e=a[1]+'<a href="http'+a[4]+"://"+a[5]+a[6]+'"'+b+">"+d+"</a>"+f;g=g.replace(a[0],e);}}if(h!=="url"){while((a=n.exec(g))){f="";if(/\./.test(a[5])){f=".";a[5]=a[5].slice(0,-1);}for(j=0;j<a.length;j++){if(!a[j]){a[j]="";}}g=g.replace(a[0],a[1]+'<a href="mailto:'+a[2]+"@"+a[3]+"."+a[4]+a[5]+'">'+a[2]+"@"+a[3]+"."+a[4]+a[5]+"</a>"+f);}}return g;};sc.helpers.autolinkTwitterScreenname=function(f,d){if(!d){d='<a href="http://twitter.com/#username#">@#username#</a>';}var e=/(^|\s|\(\[|,|\.|\()@([a-zA-Z0-9_]+)([^a-zA-Z0-9_]|$)/gi;var c=[];while(c=e.exec(f)){for(var a=0;a<c.length;a++){if(!c[a]){c[a]="";}}var b=d.replace(/#username#/gi,c[2]);f=f.replace(c[0],c[1]+b+c[3]);}return f;};sc.helpers.autolinkTwitterHashtag=function(f,e){if(!e){e='<a href="http://search.twitter.com/search?q=#hashtag_enc#">##hashtag#</a>';}var d=/(^|\s|\()#([a-zA-Z0-9\-_\.+:=]{1,}\w)([^a-zA-Z0-9\-_+]|$)/gi;var c=[];while(c=d.exec(f)){for(var a=0;a<c.length;a++){if(!c[a]){c[a]="";}}var b=e.replace(/#hashtag#/gi,c[2]);b=b.replace(/#hashtag_enc#/gi,encodeURIComponent(c[2]));f=f.replace(c[0],c[1]+b+c[3]);}return f;};sc.helpers.makeClickable=function(g,e){var a,c,f,b,d;if(!e){e={};}if(e.autolink){var a=e.autolink.type||null;var c=e.autolink.extra_code||null;var f=e.autolink.maxlen||null;}if(e.screenname){var b=e.screenname.tpl||null;}if(e.hashtag){var d=e.hashtag.tpl||null;}g=sc.helpers.autolink(g,a,c,f);g=sc.helpers.autolinkTwitterScreenname(g,b);g=sc.helpers.autolinkTwitterHashtag(g,d);return g;};sc.helpers.stripTags=function(b){var a=/<[^>]*>/gim;b=b.replace(a,"");return b;};sc.helpers.fromHTMLSpecialChars=function(a){a=a.replace(/&lt;/gi,"<");sc.helpers.dump(a);a=a.replace(/&gt;/gi,">");sc.helpers.dump(a);a=a.replace(/&quot;/gi,'"');sc.helpers.dump(a);a=a.replace(/&apos;/gi,"'");sc.helpers.dump(a);a=a.replace(/&amp;/gi,"&");sc.helpers.dump(a);return a;};sc.helpers.escape_html=function(a){return sc.helpers.htmlspecialchars(a,"ENT_QUOTES");};sc.helpers.htmlspecialchars=function(b,f){var e={},d="",a="",c=0;a=b.toString();if(false===(e=sc.helpers._get_html_translation_table("HTML_SPECIALCHARS",f))){return false;}a=a.split("&").join(e["&"]);for(d in e){if(d!="&"){entity=e[d];a=a.split(d).join(entity);}}return a;};sc.helpers.htmlentities=function(c,f){var e={},d="",a="",b="";a=c.toString();if(false===(e=sc.helpers._get_html_translation_table("HTML_ENTITIES",f))){return false;}for(d in e){b=e[d];a=a.split(d).join(b);}return a;};sc.helpers._get_html_translation_table=function(j,f){var d={},h={},c=0,a="";var e={},b={};var l={},g={};l=(j?j.toUpperCase():"HTML_SPECIALCHARS");g=(f?f.toUpperCase():"ENT_COMPAT");e[0]="HTML_SPECIALCHARS";e[1]="HTML_ENTITIES";b[0]="ENT_NOQUOTES";b[2]="ENT_COMPAT";b[3]="ENT_QUOTES";if(!isNaN(l)){l=e[l];}if(!isNaN(g)){g=b[g];}if(l==="HTML_SPECIALCHARS"){d["38"]="&amp;";if(g!=="ENT_NOQUOTES"){d["34"]="&quot;";}if(g==="ENT_QUOTES"){d["39"]="&#039;";}d["60"]="&lt;";d["62"]="&gt;";}else{if(l==="HTML_ENTITIES"){d["38"]="&amp;";if(g!=="ENT_NOQUOTES"){d["34"]="&quot;";}if(g==="ENT_QUOTES"){d["39"]="&#039;";}d["60"]="&lt;";d["62"]="&gt;";d["160"]="&nbsp;";d["161"]="&iexcl;";d["162"]="&cent;";d["163"]="&pound;";d["164"]="&curren;";d["165"]="&yen;";d["166"]="&brvbar;";d["167"]="&sect;";d["168"]="&uml;";d["169"]="&copy;";d["170"]="&ordf;";d["171"]="&laquo;";d["172"]="&not;";d["173"]="&shy;";d["174"]="&reg;";d["175"]="&macr;";d["176"]="&deg;";d["177"]="&plusmn;";d["178"]="&sup2;";d["179"]="&sup3;";d["180"]="&acute;";d["181"]="&micro;";d["182"]="&para;";d["183"]="&middot;";d["184"]="&cedil;";d["185"]="&sup1;";d["186"]="&ordm;";d["187"]="&raquo;";d["188"]="&frac14;";d["189"]="&frac12;";d["190"]="&frac34;";d["191"]="&iquest;";d["192"]="&Agrave;";d["193"]="&Aacute;";d["194"]="&Acirc;";d["195"]="&Atilde;";d["196"]="&Auml;";d["197"]="&Aring;";d["198"]="&AElig;";d["199"]="&Ccedil;";d["200"]="&Egrave;";d["201"]="&Eacute;";d["202"]="&Ecirc;";d["203"]="&Euml;";d["204"]="&Igrave;";d["205"]="&Iacute;";d["206"]="&Icirc;";d["207"]="&Iuml;";d["208"]="&ETH;";d["209"]="&Ntilde;";d["210"]="&Ograve;";d["211"]="&Oacute;";d["212"]="&Ocirc;";d["213"]="&Otilde;";d["214"]="&Ouml;";d["215"]="&times;";d["216"]="&Oslash;";d["217"]="&Ugrave;";d["218"]="&Uacute;";d["219"]="&Ucirc;";d["220"]="&Uuml;";d["221"]="&Yacute;";d["222"]="&THORN;";d["223"]="&szlig;";d["224"]="&agrave;";d["225"]="&aacute;";d["226"]="&acirc;";d["227"]="&atilde;";d["228"]="&auml;";d["229"]="&aring;";d["230"]="&aelig;";d["231"]="&ccedil;";d["232"]="&egrave;";d["233"]="&eacute;";d["234"]="&ecirc;";d["235"]="&euml;";d["236"]="&igrave;";d["237"]="&iacute;";d["238"]="&icirc;";d["239"]="&iuml;";d["240"]="&eth;";d["241"]="&ntilde;";d["242"]="&ograve;";d["243"]="&oacute;";d["244"]="&ocirc;";d["245"]="&otilde;";d["246"]="&ouml;";d["247"]="&divide;";d["248"]="&oslash;";d["249"]="&ugrave;";d["250"]="&uacute;";d["251"]="&ucirc;";d["252"]="&uuml;";d["253"]="&yacute;";d["254"]="&thorn;";d["255"]="&yuml;";}else{throw Error("Table: "+l+" not supported");}}for(c in d){a=String.fromCharCode(c);h[a]=d[c];}return h;};sc.helpers.Utf8={encode:function(b){b=b.replace(/\r\n/g,"\n");var a="";for(var e=0;e<b.length;e++){var d=b.charCodeAt(e);if(d<128){a+=String.fromCharCode(d);}else{if((d>127)&&(d<2048)){a+=String.fromCharCode((d>>6)|192);a+=String.fromCharCode((d&63)|128);}else{a+=String.fromCharCode((d>>12)|224);a+=String.fromCharCode(((d>>6)&63)|128);a+=String.fromCharCode((d&63)|128);}}}return a;},decode:function(a){var d="";var f=0;var h=0,g=0,e=0,b=0;while(f<a.length){h=a.charCodeAt(f);if(h<128){d+=String.fromCharCode(h);f++;}else{if((h>191)&&(h<224)){e=a.charCodeAt(f+1);d+=String.fromCharCode(((h&31)<<6)|(e&63));f+=2;}else{e=a.charCodeAt(f+1);b=a.charCodeAt(f+2);d+=String.fromCharCode(((h&15)<<12)|((e&63)<<6)|(b&63));f+=3;}}}return d;}};sc.helpers.trim=function(b,a){return sc.helpers.ltrim(sc.helpers.rtrim(b,a),a);};sc.helpers.ltrim=function(b,a){a=a||"\\s";return b.replace(new RegExp("^["+a+"]+","g"),"");};sc.helpers.rtrim=function(b,a){a=a||"\\s";return b.replace(new RegExp("["+a+"]+$","g"),"");};sc.helpers.nl2br=function(b,a){a=a||"<br>";b=b.replace(/(\r\n|\n\r|\r|\n)/g,a+"$1");return b;};var sc;var SPAZCORE_PLATFORM_AIR="AIR";var SPAZCORE_PLATFORM_WEBOS="webOS";var SPAZCORE_PLATFORM_TITANIUM="Titanium";var SPAZCORE_PLATFORM_UNKNOWN="__UNKNOWN";var SPAZCORE_OS_WINDOWS="Windows";var SPAZCORE_OS_LINUX="Linux";var SPAZCORE_OS_MACOS="MacOS";var SPAZCORE_OS_UNKNOWN="__OS_UNKNOWN";var SPAZCORE_DUMPLEVEL_DEBUG=4;var SPAZCORE_DUMPLEVEL_NOTICE=3;var SPAZCORE_DUMPLEVEL_WARNING=2;var SPAZCORE_DUMPLEVEL_ERROR=1;var SPAZCORE_DUMPLEVEL_NONE=0;sc.helpers.getPlatform=function(){if(window.runtime){return SPAZCORE_PLATFORM_AIR;}if(window.Mojo){return SPAZCORE_PLATFORM_WEBOS;}if(window.Titanium){return SPAZCORE_PLATFORM_TITANIUM;}return SPAZCORE_PLATFORM_UNKNOWN;};sc.helpers.isPlatform=function(b){var a=sc.helpers.getPlatform();if(a.toLowerCase()===b.toLowerCase()){return true;}else{return false;}};sc.helpers.isAIR=function(){return sc.helpers.isPlatform(SPAZCORE_PLATFORM_AIR);};sc.helpers.iswebOS=function(){return sc.helpers.isPlatform(SPAZCORE_PLATFORM_WEBOS);};sc.helpers.isTitanium=function(){return sc.helpers.isPlatform(SPAZCORE_PLATFORM_TITANIUM);};sc.helpers.debug=function(a){sc.helpers.dump(a,SPAZCORE_DUMPLEVEL_DEBUG);};sc.helpers.note=function(a){sc.helpers.dump(a,SPAZCORE_DUMPLEVEL_NOTICE);};sc.helpers.warn=function(a){sc.helpers.dump(a,SPAZCORE_DUMPLEVEL_WARNING);};sc.helpers.error=function(a){sc.helpers.dump(a,SPAZCORE_DUMPLEVEL_ERROR);};sc.helpers.dump=function(a,b){console.log(a);};sc.helpers.openInBrowser=function(a){window.open(a);};sc.helpers.getFileContents=function(a){};sc.helpers.setFileContents=function(c,b,a){};sc.helpers.getAppVersion=function(){};sc.helpers.getUserAgent=function(){};sc.helpers.setUserAgent=function(a){};sc.helpers.getClipboardText=function(){};sc.helpers.setClipboardText=function(a){};sc.helpers.getEncryptedValue=function(a){};sc.helpers.setEncryptedValue=function(a,b){};sc.helpers.getAppStoreDir=function(){};sc.helpers.getPreferencesFile=function(a,b){};sc.helpers.init_file=function(b,a){};sc.helpers.getOS=function(){return SPAZCORE_OS_UNKNOWN;};sc.helpers.isOS=function(b){var a=sc.helpers.getOS();if(a===b){return true;}return false;};sc.helpers.isWindows=function(){return sc.helpers.isOS(SPAZCORE_OS_WINDOWS);};sc.helpers.isLinux=function(){return sc.helpers.isOS(SPAZCORE_OS_LINUX);};sc.helpers.isMacOS=function(){return sc.helpers.isOS(SPAZCORE_OS_MACOS);};sc.helpers.objectToQueryString=function(a){var d,b,e,c=[];for(b in a){e=a[b];c.push(encodeURIComponent(b)+"="+encodeURIComponent(e));}d=c.join("&");return d;};var sc,jQuery;sc.helpers.removeExtraElements=function(d,c,a){if(!a){a=false;}var b=jQuery(d);var e=b.parent().get(0);var f=b.length-c;sch.debug("removing extra elements from "+d);sch.debug("matching item count "+b.length);sch.debug("max_items: "+c);sch.debug("diff: "+f);sch.debug("remove_from_top: "+a);if(f>0){if(!a){b.slice(f*-1).each(function(){this.parentNode.removeChild(this);});}else{b.slice(f).each(function(){this.parentNode.removeChild(this);});}}};sc.helpers.removeDuplicateElements=function(b,a){sc.helpers.dump("removeDuplicateElements TODO");};sc.helpers.updateRelativeTimes=function(b,a){jQuery(b).each(function(d){var e=jQuery(this).attr(a);var c=sc.helpers.getRelativeTime(e);jQuery(this).html(c);});};sc.helpers.markAllAsRead=function(a){jQuery(a).removeClass("new");};var sc,DOMParser;sc.helpers.createXMLFromString=function(a){var b,d;try{b=new DOMParser();d=b.parseFromString(a,"text/xml");return d;}catch(c){sc.helpers.dump(c.name+":"+c.message);return null;}};var SPAZCORE_ACCOUNT_TWITTER="twitter";var SPAZCORE_ACCOUNT_IDENTICA="identi.ca";var SPAZCORE_ACCOUNT_STATUSNET="StatusNet";var SPAZCORE_ACCOUNT_FLICKR="flickr";var SPAZCORE_ACCOUNT_WORDPRESS="wordpress.com";var SPAZCORE_ACCOUNT_TUMBLR="tumblr";var SPAZCORE_ACCOUNT_FACEBOOK="facebook";var SPAZCORE_ACCOUNT_FRIENDFEED="friendfeed";var SpazAccounts=function(a){if(a){this.prefs=a;}else{this.prefs=new SpazPrefs();this.prefs.load();}this.load();};SpazAccounts.prototype.prefskey="users";SpazAccounts.prototype.load=function(){var a=this.prefs.get(this.prefskey);sch.debug("accjson:'"+a+"'");try{this._accounts=sch.deJSON(this.prefs.get(this.prefskey));}catch(b){sch.error(b.message);this._accounts=[];}if(!sch.isArray(this._accounts)){this._accounts=[];}sch.debug("this._accounts:'"+this._accounts+"'");};SpazAccounts.prototype.save=function(){this.prefs.set(this.prefskey,sch.enJSON(this._accounts));sch.debug('saved users to "'+this.prefskey+'" pref');for(var a in this._accounts){sch.debug(this._accounts[a].id);}sch.debug("THE ACCOUNTS:");sch.debug(sch.enJSON(this._accounts));sch.debug("ALL PREFS:");sch.debug(sch.enJSON(this.prefs._prefs));};SpazAccounts.prototype.getAll=function(){return this._accounts;};SpazAccounts.prototype.setAll=function(b){this._accounts=b;this.save();sch.debug("Saved these accounts:");for(var a=0;a<this_accounts.length;a++){sch.debug(this._accounts[x].id);}};SpazAccounts.prototype.update=function(d,a){var c=this.get(d);if(c){var b=sch.defaults(c,a);return this.get(d);}else{sch.error('No account with id "'+d+'" exists');return null;}};SpazAccounts.prototype.initAccounts=function(){this._accounts=[];this.save();};SpazAccounts.prototype.add=function(d,a,b){if(!b){sch.error("Type must be set");return false;}var d=d.toLowerCase();var c=this.generateID();this._accounts.push({id:c,username:d,password:a,type:b,meta:{}});this.save();sch.debug("Added new user:"+c);return this.get(c);};SpazAccounts.prototype.remove=function(c){sch.debug("Deleting '"+c+"'");var b=this._findUserIndex(c);if(b!==false){var a=this._accounts.splice(b,1);sch.debug("Deleted account '"+a[0].id+"'");return a[0];}else{sch.error("Could not find this id to delete: '"+c+"'");return false;}};SpazAccounts.prototype.getByType=function(b){var c=[];for(var a=0;a<this._accounts.length;a++){if(this._accounts[a].type===b){c.push(this._accounts[a]);}}return c;};SpazAccounts.prototype.getByUsername=function(c){var b=[];for(var a=0;a<this._accounts.length;a++){if(this._accounts[a].username===c){b.push(this._accounts[a]);}}return b;};SpazAccounts.prototype.getByUsernameAndType=function(d,b){var c=[];for(var a=0;a<this._accounts.length;a++){if(this._accounts[a].username===d&&this._accounts[a].type===b){c.push(this._accounts[a]);}}return c;};SpazAccounts.prototype.get=function(b){var a=this._findUserIndex(b);if(a!==false){return this._accounts[i];}return false;};SpazAccounts.prototype._findUserIndex=function(a){for(i=0;i<this._accounts.length;i++){if(this._accounts[i].id===a){sch.debug("Found matching user record to "+a);return i;}}return false;};SpazAccounts.prototype.generateID=function(){var a=sc.helpers.UUID();return a;};SpazAccounts.prototype.getMeta=function(b,a){if(user=this.get(b)){if(user.meta&&user.meta[a]!==null){return user.meta[a];}}return null;};SpazAccounts.prototype.setMeta=function(d,b,c){var a=this._findUserIndex(d);if(a!==false){if(!this._accounts[a].meta){this._accounts[a].meta={};}this._accounts[a].meta[b]=c;this.save();return this._accounts[a].meta[b];}return null;};function SpazImageURL(a){this.apis={};this.initAPIs();}SpazImageURL.prototype.initAPIs=function(){this.addAPI("twitpic",{url_regex:new RegExp("http://twitpic.com/([a-zA-Z0-9]+)","gi"),getThumbnailUrl:function(b){var a="http://twitpic.com/show/thumb/"+b;return a;},getImageUrl:function(b){var a="http://twitpic.com/show/large/"+b;return a;}});this.addAPI("yfrog",{url_regex:new RegExp("http://yfrog.(?:com|us)/([a-zA-Z0-9]+)","gim"),getThumbnailUrl:function(b){var a="http://yfrog.com/"+b+".th.jpg";return a;},getImageUrl:function(b){var a="http://yfrog.com/"+b+":iphone";return a;}});this.addAPI("twitgoo",{url_regex:/http:\/\/twitgoo.com\/([a-zA-Z0-9]+)/gi,getThumbnailUrl:function(b){var a="http://twitgoo.com/show/thumb/"+b;return a;},getImageUrl:function(b){var a="http://twitgoo.com/show/img/"+b;return a;}});this.addAPI("pikchur",{url_regex:/http:\/\/(?:pikchur\.com|pk\.gd)\/([a-zA-Z0-9]+)/gi,getThumbnailUrl:function(b){var a="http://img.pikchur.com/pic_"+b+"_s.jpg";return a;},getImageUrl:function(b){var a="http://img.pikchur.com/pic_"+b+"_l.jpg";return a;}});this.addAPI("tweetphoto",{url_regex:/http:\/\/tweetphoto.com\/([a-zA-Z0-9]+)/gi,getThumbnailUrl:function(b){var a="http://TweetPhotoAPI.com/api/TPAPI.svc/imagefromurl?size=thumbnail&url=http://tweetphoto.com/"+b;return a;},getImageUrl:function(b){var a="http://TweetPhotoAPI.com/api/TPAPI.svc/imagefromurl?size=big&url=http://tweetphoto.com/"+b;return a;}});this.addAPI("pic.gd",{url_regex:/http:\/\/pic.gd\/([a-zA-Z0-9]+)/gi,getThumbnailUrl:function(b){var a="http://TweetPhotoAPI.com/api/TPAPI.svc/imagefromurl?size=thumbnail&url=http://pic.gd/"+b;return a;},getImageUrl:function(b){var a="http://TweetPhotoAPI.com/api/TPAPI.svc/imagefromurl?size=big&url=http://pic.gd/"+b;return a;}});};SpazImageURL.prototype.getAPIs=function(){return this.apis;};SpazImageURL.prototype.getAPI=function(a){return this.apis[a];};SpazImageURL.prototype.addAPI=function(c,b){var a={};a.url_regex=b.url_regex;a.getThumbnailUrl=b.getThumbnailUrl;a.getImageUrl=b.getImageUrl;this.apis[c]=a;};SpazImageURL.prototype.findServiceUrlsInString=function(e){var d={},b=0,c,a,f;for(a in this.apis){f=this.getAPI(a);sch.dump(a);sch.dump(f.url_regex);while((c=f.url_regex.exec(sch.trim(e)))!=null){sch.dump(c);d[a]=c;b++;}}sch.dump("num_matches:"+b);sch.dump(d);if(b>0){return d;}else{return null;}};SpazImageURL.prototype.getThumbsForMatches=function(f){var b,a,e,d,g={},c=0;for(a in f){sch.dump("SERVICE:"+a);e=this.getAPI(a);urls=f[a];sch.dump("URLS:"+urls);g[urls[0]]=e.getThumbnailUrl(urls[1]);c++;}sch.dump("num_urls:"+c);sch.dump(g);if(c>0){return g;}else{return null;}};SpazImageURL.prototype.getThumbsForUrls=function(b){var a=this.findServiceUrlsInString(b);if(a){return this.getThumbsForMatches(a);}else{return null;}};SpazImageURL.prototype.getThumbForUrl=function(a){var b=this.getThumbsForUrls(a);if(b){return b[a];}else{return null;}};SpazImageURL.prototype.getImagesForMatches=function(g){var b,a,e,f,d={},c=0;for(a in g){sch.dump("SERVICE:"+a);e=this.getAPI(a);urls=g[a];sch.dump("URLS:"+urls);d[urls[0]]=e.getImageUrl(urls[1]);c++;}sch.dump("num_urls:"+c);sch.dump(d);if(c>0){return d;}else{return null;}};SpazImageURL.prototype.getImagesForUrls=function(b){var a=this.findServiceUrlsInString(b);if(a){return this.getImagesForMatches(a);}else{return null;}};SpazImageURL.prototype.getImageForUrl=function(a){var b=this.getImagesForUrls(a);if(b){return b[a];}else{return null;}};var sc,jQuery;function SpazPhotoMailer(a){this.apis=this.getAPIs();}SpazPhotoMailer.prototype.getAPILabels=function(){var b=[];for(var a in this.getAPIs()){b.push(a);}return b;};SpazPhotoMailer.prototype.getAPIs=function(){var b=this;var a={yfrog:{email_tpl:"{{username}}.??????@yfrog.com",message_in:"subject",email_info_url:"http://yfrog.com/froggy.php",help_text:"Log-in to yfrog.com with your Twitter username and password, and click 'my yfrog.' Your customized posting email will be listed on the right.",getToAddress:function(c){var d=c.username;return b.apis.yfrog.email_tpl.replace("{{username}}",d);}},posterous:{email_tpl:"post@posterous.com",message_in:"subject",email_info_url:"http://posterous.com/autopost",help_text:"Post instantly to your Posterous blog. Setup autopost to post back to Twitter! Login for more information and controls.",getToAddress:function(c){return b.apis.posterous.email_tpl;}},pikchur:{email_tpl:"{{username}}.???@pikchur.com",message_in:"subject",email_info_url:"http://pikchur.com/dashboard/profile",help_text:"Log-in to pikchur with your Twitter username and password, and click 'Profile.' Your customized posting email will be listed",getToAddress:function(c){var d=c.username;return b.apis.pikchur.email_tpl.replace("{{username}}",d);}},twitgoo:{email_tpl:"m@twitgoo.com",message_in:"subject",email_info_url:"http://twitgoo.com/-settings/mobile",help_text:"Log-in to twitgoo.com and click 'Settings.' Add the email address from which you'll be sending messages.",getToAddress:function(c){return b.apis.twitgoo.email_tpl;}},twitpic:{email_tpl:"{{username}}.####@twitpic.com",message_in:"subject",email_info_url:"http://twitpic.com/settings.do",help_text:"Log-in to twitpic.com, and click 'Settings.' Your custom email address will be listed.",getToAddress:function(c){var d=c.username;return b.apis.twitpic.email_tpl.replace("{{username}}",d);}},tweetphoto:{email_tpl:"{{username}}.####@tweetphoto.com",message_in:"subject",email_info_url:"http://www.tweetphoto.com/mysettings.php",help_text:"Log-in to tweetphoto.com and click 'My Settings.' Your custom email address will be listed.",getToAddress:function(c){var d=c.username;return b.apis.tweetphoto.email_tpl.replace("{{username}}",d);},retrievePostingAddress:function(h,d,g,c){function e(n,m){var l="http://tweetphotoapi.com/api/tpapi.svc/json/users/"+n;var j="TPAPI: "+n+","+m;jQuery.ajax({success:function(p,q){var o=sc.helpers.deJSON(p);},error:function(q,o,p){c(q,o,p);},beforeSend:function(o){o.setRequestHeader("TPAPI",n+","+m);},url:l});}function f(n,l,m){var j="TPAPI: "+n+","+l;jQuery.ajax({success:function(p,q){var o=sc.helpers.deJSON(p);g(o.Email);},error:function(q,o,p){c(q,o,p);},beforeSend:function(o){o.setRequestHeader("TPAPI",n+","+l);},url:m});}}}};return a;};SpazPhotoMailer.prototype.setAPI=function(a){this.api=this.apis[a];};SpazPhotoMailer.prototype.send=function(a,c,b){};var sc,Titanium,air,jQuery,Mojo;var SPAZCORE_PREFS_TI_KEY="preferences_json";var SPAZCORE_PREFS_AIR_FILENAME="preferences.json";var SPAZCORE_PREFS_MOJO_COOKIENAME="preferences.json";var SPAZCORE_PREFS_STANDARD_COOKIENAME="preferences_json";function SpazPrefs(b,c,a){this._prefs={};this._sanity_methods={};if(a){sch.debug("adding sanity methods to prefs");this._sanity_methods=a;}if(c){this.id=c;}if(b){this.setDefaults(b);this._applyDefaults();}this.loaded=false;}SpazPrefs.prototype.setDefaults=function(a){this._defaults=a;};SpazPrefs.prototype._applyDefaults=function(){var a;for(a in this._defaults){sc.helpers.debug('Copying default "'+a+'":"'+this._defaults[a]+'" ('+typeof(this._defaults[a])+")");this._prefs[a]=this._defaults[a];}};SpazPrefs.prototype.resetPrefs=function(){this._applyDefaults();this.save();};SpazPrefs.prototype.get=function(a,c){var b;if(c){b=this.getEncrypted(a);}else{sc.helpers.debug('Looking for pref "'+a+'"');if(this._prefs[a]!==undefined){sc.helpers.debug('Found pref "'+a+'" of value "'+this._prefs[a]+'" ('+typeof(this._prefs[a])+")");b=this._prefs[a];}else{b=undefined;}}if(this._sanity_methods[a]&&this._sanity_methods[a].onGet){sc.helpers.debug("Calling "+a+".onGet()");b=this._sanity_methods[a].onGet.call(this,a,b);}return b;};SpazPrefs.prototype.set=function(a,c,b){sc.helpers.debug('Setting and saving "'+a+'" to "'+c+'" ('+typeof(c)+")");if(this._sanity_methods[a]&&this._sanity_methods[a].onSet){sc.helpers.debug("Calling "+a+".onSet()");c=this._sanity_methods[a].onSet.call(this,a,c);}if(b){this.setEncrypted(a,c);}else{this._prefs[a]=c;}this.save();};SpazPrefs.prototype.setSanityMethod=function(a,b,c){if(b!=="onGet"&&b!=="onSet"){sch.error("sanity method type must be onGet or onSet");}if(!this._sanity_methods[a]){this._sanity_methods[a]={};}this._sanity_methods[a][b]=c;};SpazPrefs.prototype.getEncrypted=function(a){alert("not yet implemented");};SpazPrefs.prototype.setEncrypted=function(a,b){alert("not yet implemented");};SpazPrefs.prototype.load=function(a){};SpazPrefs.prototype.save=function(){};if(sc){var scPrefs=SpazPrefs;}var sc;function SpazShortText(){this.map={};this.genBaseMaps();this.processBaseMaps();}SpazShortText.prototype.genBaseMaps=function(){this.basemap={about:"abt",account:"acct",address:"addy",anyone:"ne1",and:"&",at:"@","at the moment":"atm",back:"bk","be right back":"brb","be back later":"bbl","be back soon":"bbs",because:"b/c",boyfriend:"bf",but:"but",girlfriend:"gf",between:"b/t","by the way":"btw",definitely:"def",everyone:"evr1",favorite:"fav","for":"fr",from:"frm","for example":"Fr ex",follow:"fllw",follower:"fllwr",followers:"fllwrs",following:"fllwng",good:"gd",got:"gt",having:"hvg",hours:"hrs","i don't know":"idk","if i recall correctly":"iirc","in my opinion":"imo","in my humble opinion":"imho",just:"jst",little:"lttl",love:"<3",message:"msg",midnight:"12am","never mind":"nm","no problem":"np","not much":"nm",pages:"pgs",pictures:"pics",obviously:"obvs",please:"pls",seriously:"srsly",something:"s/t",sorry:"sry",text:"txt",thanks:"thx",think:"thk","to be honest":"tbh",though:"tho",through:"thru",weeks:"wks","with":"w",without:"w/o",that:"tht",what:"wht",have:"hv","don't":"dnt",was:"ws",well:"wll",right:"rt",here:"hr",going:"gng",like:"lk",can:"cn",want:"wnt","that's":"thts",there:"thr",come:"cme",really:"rly",would:"wld",look:"lk",when:"whn",okay:"ok","can't":"cnt",tell:"tll","I'll":"Ill",could:"cl","didn't":"ddnt",yes:"y",had:"hd",then:"thn",take:"tke",make:"mk",gonna:"gna",never:"nvr",them:"thm",more:"mr",over:"ovr",where:"whr","what's":"whts",thing:"thg",maybe:"mybe",down:"dwn",very:"very",should:"shld",anything:"nethg",said:"sd",any:"ne",even:"evn",thank:"thk",give:"gve",thought:"thot",help:"hlp",talk:"tlk",people:"ppl",find:"fnd",nothing:"nthg",again:"agn",things:"thgs",call:"cll",told:"tld",great:"grt",before:"b4",better:"bttr",ever:"evr",night:"nite",than:"thn",away:"awy",first:"1st",believe:"blve",other:"othr",everything:"evrythg",work:"wrk",fine:"fne",home:"hme",after:"aftr",last:"lst",keep:"kp",around:"arnd",stop:"stp","long":"lng",always:"alwys",listen:"lstn",wanted:"wntd",happened:"hppnd","won't":"wnt",trying:"tryng",kind:"knd",wrong:"wrng",talking:"tlkg",being:"bng",bad:"bd",remember:"rmbr",getting:"gttg",together:"togthr",mother:"mom",understand:"undrstd","wouldn't":"wldnt",actually:"actly",baby:"bby",father:"dad",done:"dne","wasn't":"wsnt",might:"mite",every:"evry",enough:"engh",someone:"sm1",family:"fmly",whole:"whl",another:"anthr",jack:"jck",yourself:"yrslf",best:"bst",must:"mst",coming:"cmg",looking:"lkg",woman:"wmn",which:"whch",years:"yrs",room:"rm",left:"lft",tonight:"2nte",real:"rl",hmm:"hm",happy:"hpy",pretty:"prty",girl:"grl",show:"shw",friend:"frnd",already:"alrdy",saying:"syng",next:"nxt",job:"jb",problem:"prblm",minute:"min",found:"fnd",world:"wrld",thinking:"thkg","haven't":"hvnt",heard:"hrd",honey:"hny",matter:"mttr",myself:"myslf","couldn't":"cldnt",exactly:"xctly",probably:"prob",happen:"hppn","we've":"wve",hurt:"hrt",both:"bth",gotta:"gtta",alone:"alne",excuse:"xcse",start:"strt",today:"2dy",ready:"rdy",until:"untl",whatever:"wtevr",wants:"wnts",hold:"hld",yet:"yt",took:"tk",once:"1ce",gone:"gne",called:"clld",morning:"morn",supposed:"sppsd",friends:"frnds",stuff:"stff",most:"mst",used:"usd",worry:"wrry",second:"2nd",part:"prt",truth:"trth",school:"schl",forget:"frgt",business:"biz",cause:"cuz",telling:"tllg",chance:"chnce",move:"mv",person:"prsn",somebody:"smbdy",heart:"hrt",point:"pt",later:"ltr",making:"makg",anyway:"nywy",many:"mny",phone:"phn",reason:"rsn",looks:"lks",bring:"brng",turn:"trn",tomorrow:"tmrw",trust:"trst",check:"chk",change:"chng",anymore:"anymr",town:"twn","aren't":"rnt",working:"wrkg",year:"yr",taking:"tkg",means:"mns",brother:"bro",play:"ply",hate:"h8",says:"sez",beautiful:"btfl",crazy:"crzy",party:"prty",afraid:"afrd",important:"imptnt",rest:"rst",word:"wrd",watch:"wtch",glad:"gld",sister:"sistr",minutes:"min",everybody:"evrybdy",couple:"cpl",either:"ethr",feeling:"flg",under:"undr","break":"brk",promise:"prmse",easy:"ez",question:"q",doctor:"doc",walk:"wlk",trouble:"trbl",different:"diff",hospital:"hsptl",anybody:"anybdy",wedding:"wddg",perfect:"prfct",police:"cops",waiting:"wtng",dinner:"din",against:"agst",funny:"fny",husband:"hsbnd",child:"kid","shouldn't":"shldnt",half:"1/2",moment:"mmnt",sleep:"slp",started:"strtd",young:"yng",sounds:"snds",lucky:"lky",sometimes:"smtimes",plan:"pln",serious:"srs",ahead:"ahd",week:"wk",wonderful:"wndfl",past:"pst",number:"#",nobody:"nbdy",along:"alng","finally":"fnly",worried:"wrrd",book:"bk",sort:"srt",safe:"sfe",living:"livg",children:"kids","weren't":"wrnt",front:"frnt",loved:"luvd",asking:"askg",running:"rnng",clear:"clr",figure:"fgr",felt:"flt",parents:"prnts",absolutely:"abs",alive:"alve",meant:"mnt",happens:"hppns",kidding:"kddg",full:"fl",meeting:"mtg",coffee:"cffe",sound:"snd",women:"wmn",welcome:"wlcm",months:"mnths",hour:"hr",speak:"spk",thinks:"thks",Christmas:"Xmas",possible:"pssble",worse:"wrs",company:"co",mistake:"mstk",handle:"hndl",spend:"spnd",totally:"ttly",giving:"gvg",control:"ctrl",realize:"rlze",power:"pwr",president:"pres",girls:"grls",taken:"tkn",picture:"pic",talked:"tlkd",hundred:"hndrd",changed:"chgd",completely:"cmpltly",explain:"exp",playing:"plyg",relationship:"rlshp",loves:"lvs",fucking:"fkg",anywhere:"newhr",questions:"qs",wonder:"wndr",calling:"cllg",somewhere:"smwhr",straight:"str8",fast:"fst",words:"wrds",worked:"wrkd",light:"lite",cannot:"can't",protect:"prtct","class":"cls",surprise:"sprise",sweetheart:"swthrt",looked:"lkd",except:"xcpt",takes:"tks",situation:"sitn",besides:"bsds",pull:"pll",himself:"hmslf","hasn't":"hsnt",worth:"wrth",amazing:"amzg",given:"gvn",expect:"xpct",rather:"rthr",black:"blk",movie:"film",country:"cntry",perhaps:"prhps",watching:"wtchg",darling:"darlg",honor:"hnr",personal:"prsnl",moving:"movg",till:"til",admit:"admt",problems:"prbs",information:"info",honest:"hnst",missed:"mssd",longer:"lngr",dollars:"$s",evening:"eve",starting:"strtg",suppose:"spps",street:"st",sitting:"sttg",favor:"fvr",apartment:"apt",court:"crt",terrible:"trrbl",clean:"cln",learn:"lrn",works:"wks",relax:"rlx",million:"mil",prove:"prv",smart:"smrt",missing:"missg",forgot:"frgt",small:"sm",interested:"intrstd",table:"tbl",become:"bcm",pregnant:"preg",middle:"mddl",ring:"rng",careful:"crfl",figured:"fgrd",stick:"stk",stopped:"stppd",standing:"stndg",forgive:"frgv",wearing:"wearg",hoping:"hopg",thousand:"k",paper:"ppr",tough:"tuff",count:"cnt",birthday:"bday",history:"hstry",share:"shr",offer:"offr",hurry:"hrry",feet:"ft",wondering:"wonderg",building:"buildg",ones:"1s",finish:"fin","would've":"wldve",interesting:"intrstg",enjoy:"njoy",road:"rd",staying:"stayg","short":"shrt",finished:"fin",respect:"rspct",spent:"spnt",attention:"attn",holding:"hldg",surprised:"srprsd",keeping:"kpg",putting:"puttg",dark:"drk",self:"slf",using:"usg",helping:"helpg",normal:"nrml",lawyer:"atty",floor:"flr",whether:"whthr","everything's":"evrthg's",present:"prsnt","private":"priv",cover:"cvr",judge:"jdg",upstairs:"upstrs",mommy:"mom",possibly:"pssbly",worst:"wrst","I am":"I'm","I will":"I'll","I had":"I'd","I would":"I'd","I have":"I've","You are":"You're","You will":"You'll","You had":"You'd","You would":"You'd","You have":"You've","He is":"He's","He has":"He's","He will":"He'll","He had":"He'd","He would":"He'd","She is":"She's","She has":"She's","She will":"She'll","She had":"She'd","She would":"She'd","It is":"It's","It has":"It's","It will":"It'll","It would":"It'd","It had":"It'd","We are":"We're","We will":"We'll","We had":"We'd","We would":"We'd","We have":"We've","They are":"They're","They will":"They'll","They had":"They'd","They would":"They'd","They have":"They've","There is":"There's","There has":"There's","There will":"There'll","There had":"There'd","There would":"There'd","That is":"That's","That has":"That's","That will":"That'll","That had":"That'd","That would":"That'd","are not":"aren't","can not":"can't","could not":"couldn't","did not":"didn't","does not":"doesn't","do not":"don't","had not":"hadn't","has not":"hasn't","is not":"isn't","must not":"mustn't","need not":"needn't","should not":"shouldn't","was not":"wasn't","were not":"weren't","will not":"won't","would not":"wouldn't",one:"1",two:"2",three:"3",four:"4",five:"5",six:"6",seven:"7",eight:"8",nine:"9",ten:"10",eleven:"11",twelve:"12",twenty:"20"};this.baserawmap={"--":"","-\\s+":"-","\\s+-":"-","\\s+":" ","\\s+$":"","^\\s+":"","\\s?\\.\\.\\.":"","\\.\\s+":". ","\\.\\s*$":"","RT:? @[a-z0-9_]+:? RT:? @([a-z0-9_]+):?":"RT @$1"};};SpazShortText.prototype.processBaseMaps=function(){var b,d,c,a;for(b in this.basemap){d=this.basemap[b];c=new RegExp("(\\b)"+b+"(\\b)","gi");this.map[b]={"short":"$1"+d+"$2",regex:c};}for(b in this.baserawmap){d=this.baserawmap[b];c=new RegExp(b,"gi");this.map[b]={"short":d,regex:c};}};SpazShortText.prototype.shorten=function(d){for(var a in this.map){var c=this.map[a].regex;var b=this.map[a]["short"];d=d.replace(c,b);}return d;};SpazShortText.prototype.addMap=function(c,b,a){a=a||false;if(a){this.baserawmap[c]=b;}else{this.basemap[c]=b;}this.processBaseMaps();};SpazShortText.prototype.getMaps=function(){return this.map;};var sc,jQuery;var SPAZCORE_SHORTURL_SERVICE_SHORTIE="short.ie";var SPAZCORE_SHORTURL_SERVICE_ISGD="is.gd";var SPAZCORE_SHORTURL_SERVICE_BITLY="bit.ly";var SPAZCORE_SHORTURL_SERVICE_JMP="j.mp";var SPAZCORE_EXPANDABLE_DOMAINS=["ad.vu","bit.ly","cli.gs","ff.im","is.gd","j.mp","ow.ly","poprl.com","short.ie","sn.im","snipr.com","tinyurl.com","tr.im","twurl.nl","urlzen.com","xrl.us","zi.ma"];if(!sc.events){sc.events={};}sc.events.newShortURLSuccess="newShortURLSuccess";sc.events.newShortURLFailure="newShortURLFailure";sc.events.newExpandURLSuccess="recoverLongURLSuccess";sc.events.newExpandURLFailure="recoverLongURLFailure";function SpazShortURL(a){this.api=this.getAPIObj(a);this.expanded_cache={};}SpazShortURL.prototype.getAPIObj=function(a){var b={};b[SPAZCORE_SHORTURL_SERVICE_BITLY]={url:"http://bit.ly/api",getData:function(c,d){if(sc.helpers.isArray(c)){b[SPAZCORE_SHORTURL_SERVICE_BITLY].processing_multiple=true;b[SPAZCORE_SHORTURL_SERVICE_BITLY].url="http://api.bit.ly/shorten";d.longUrl=c;return d;}else{b[SPAZCORE_SHORTURL_SERVICE_BITLY].processing_multiple=false;return{url:c};}},processResult:function(f){if(b[SPAZCORE_SHORTURL_SERVICE_BITLY].processing_multiple===true){var c=sc.helpers.deJSON(f);var d={};for(var e in c.results){d[e]=c.results[e].shortUrl;}return d;}else{return f;}}};b[SPAZCORE_SHORTURL_SERVICE_JMP]={url:"http://j.mp/api",getData:function(c,d){if(sc.helpers.isArray(c)){b[SPAZCORE_SHORTURL_SERVICE_JMP].processing_multiple=true;b[SPAZCORE_SHORTURL_SERVICE_JMP].url="http://api.j.mp/shorten";d.longUrl=c;return d;}else{b[SPAZCORE_SHORTURL_SERVICE_JMP].processing_multiple=false;return{url:c};}},processResult:function(f){if(b[SPAZCORE_SHORTURL_SERVICE_JMP].processing_multiple===true){var c=sc.helpers.deJSON(f);var d={};for(var e in c.results){d[e]=c.results[e].shortUrl;}return d;}else{return f;}}};b[SPAZCORE_SHORTURL_SERVICE_SHORTIE]={url:"http://short.ie/api?",getData:function(c,e){if(c.match(/ /gi)){c=c.replace(/ /gi,"%20");}var d={orig:c,url:c,email:"","private":"false",format:"rest"};return d;}};b[SPAZCORE_SHORTURL_SERVICE_ISGD]={url:"http://is.gd/api.php",getData:function(c,d){return{longurl:c};}};return b[a];};SpazShortURL.prototype.shorten=function(a,c){var b=this;if(!c){c={};}c.event_target=c.event_target||document;c.apiopts=c.apiopts||null;var e=this.api.getData(a,c.apiopts);if(sc.helpers.getMojoURL){this.api.url=sc.helpers.getMojoURL(this.api.url);}var d=jQuery.ajax({complete:function(g,f){},error:function(j,h,f){sc.helpers.dump(b.api.url+" error:"+h);var g={url:b.api.url,xhr:null,msg:null};if(j){g.xhr=j;sc.helpers.dump("Error:"+j.status+" from "+b.api.url);}else{sc.helpers.dump("Error:Unknown from "+b.api.url);g.msg="Unknown Error";}b._onShortenResponseFailure(g,c.event_target);},success:function(f){var g={};if(b.api.processResult){g=b.api.processResult(f);}else{g={shorturl:f,longurl:a};}b._onShortenResponseSuccess(g,c.event_target);},type:"POST",url:this.api.url,data:e});};SpazShortURL.prototype._onShortenResponseSuccess=function(a,b){sc.helpers.triggerCustomEvent(sc.events.newShortURLSuccess,b,a);};SpazShortURL.prototype._onShortenResponseFailure=function(b,a){sc.helpers.triggerCustomEvent(sc.events.newShortURLFailure,a,b);};SpazShortURL.prototype.expand=function(d,c){var b=this;var a;if(!c){c={};}c.event_target=c.event_target||document;if((a=this.getExpandedURLFromCache())){b._onExpandResponseSuccess({shorturl:d,longurl:a},c.event_target);return;}var e=jQuery.ajax({complete:function(g,f){},error:function(j,h,f){sc.helpers.dump(this.url+" error:"+h);var g={url:this.url,xhr:null,msg:null};if(j){g.xhr=j;sc.helpers.dump("Error:"+j.status+" from "+this.url);}else{sc.helpers.dump("Error:Unknown from "+this.url);g.msg="Unknown Error";}b._onExpandResponseFailure(g,c.event_target);},success:function(g){g=sc.helpers.deJSON(g);var f=g[d];b.saveExpandedURLToCache(d,f);b._onExpandResponseSuccess({shorturl:d,longurl:f},c.event_target);},beforeSend:function(f){},type:"GET",url:"http://longurlplease.appspot.com/api/v1.1",data:{q:d}});};SpazShortURL.prototype._onExpandResponseSuccess=function(a,b){sc.helpers.triggerCustomEvent(sc.events.newExpandURLSuccess,b,a);};SpazShortURL.prototype._onExpandResponseFailure=function(b,a){sc.helpers.triggerCustomEvent(sc.events.newExpandURLFailure,a,b);};SpazShortURL.prototype.findExpandableURLs=function(g){var h,c,e=[],a,j,b,f,d=[];for(var c=0;c<SPAZCORE_EXPANDABLE_DOMAINS.length;c++){b=SPAZCORE_EXPANDABLE_DOMAINS[c];if(b=="ff.im"){d.push(new RegExp("http://"+b+"/(-?[a-zA-Z0-9]+)","gi"));}else{d.push(new RegExp("http://"+b+"/([a-zA-Z0-9]+)","gi"));}}for(var c=0;c<d.length;c++){f=d[c];sch.dump("looking for "+f+" in '"+g+"'");while((a=f.exec(sch.trim(g)))!=null){e.push(a[0]);}}sch.dump(e);if(e.length>0){return e;}else{return null;}};SpazShortURL.prototype.expandURLs=function(d,c){for(var a=0;a<d.length;a++){var b=d[a];sch.dump("expanding "+b);this.expand(b,{event_target:c});}};SpazShortURL.prototype.replaceExpandableURL=function(c,b,a){c=c.replace(b,a,"gi");c=c.replace(b.replace("http://",""),a.replace("http://",""),"gi");return c;};SpazShortURL.prototype.getExpandedURLFromCache=function(a){return this.expanded_cache[a];};SpazShortURL.prototype.saveExpandedURLToCache=function(a,b){this.expanded_cache[a]=b;};var sc;function SpazTemplate(){this._tpls={};}SpazTemplate.prototype.addTemplateMethod=function(a,b){this._tpls[a]=b;};SpazTemplate.prototype.parseTemplate=function(b,c){var a=this._tpls[b](c);return a;};SpazTemplate.prototype.parseArray=function(c,d){var b="";for(var a=0;a<d.length;a++){b+=this.parseTemplate(c,d[a]);}return b;};var sc,jQuery;var SpazTimeline=function(b){var a=this;this.refresh=function(){sch.debug("Refreshing timeline");a.requestData.call(a);};this.onSuccess=function(d){sch.debug("onSuccess timeline");var c=sc.helpers.getEventData(d);a.data_success.call(a,d,c);a.startRefresher();};this.onFailure=function(d){sch.debug("onFailure timeline");var c=sc.helpers.getEventData(d);a.data_failure.call(a,d,c);a.startRefresher();};this._init(b);};SpazTimeline.prototype._init=function(a){a=a||{};this.max_items=a.max_items||100;this.refresh_time=a.refresh_time||1000*60*2;this.timeline_container_selector=a.timeline_container_selector||"#timeline";this.timeline_item_selector=a.timeline_item_selector||"div.timeline-entry";this.event_target=a.event_target||jQuery(this.timeline_container_selector).get(0);this.add_method=a.add_method||"prepend";this.success_event=a.success_event||"timeline-success";this.failure_event=a.failure_event||"timeline-failure";this.renderer=a.renderer||null;this.request_data=a.request_data||null;this.data_success=a.data_success||null;this.data_failure=a.data_failure||null;this.refresher=a.refresher||null;if(!this.renderer){throw new Error("renderer is required");}if(!this.request_data){throw new Error("request_data is required");}if(!this.data_success){throw new Error("data_success is required");}this.container=jQuery(this.timeline_container_selector).get(0);};SpazTimeline.prototype.last_id=-1;SpazTimeline.prototype.model=[];SpazTimeline.prototype.start=function(){sch.debug("Starting timeline");this.requestData();};SpazTimeline.prototype.refresh=function(){sch.debug("Refreshing timeline (prototype)");this.requestData();};SpazTimeline.prototype.requestData=function(){sch.debug("Requesting data timeline");this.stopRefresher();this.stopListening();this.startListening();var a=this.request_data();};SpazTimeline.prototype.startListening=function(){var a=this;sc.helpers.debug("Listening for "+a.success_event);sc.helpers.listen(a.event_target,a.success_event,a.onSuccess);sc.helpers.listen(a.event_target,a.failure_event,a.onFailure);};SpazTimeline.prototype.stopListening=function(){var a=this;sc.helpers.debug("Stopping listening for "+a.success_event);sc.helpers.unlisten(a.event_target,a.success_event,a.onSuccess);sc.helpers.unlisten(a.event_target,a.failure_event,a.onFailure);};SpazTimeline.prototype.startRefresher=function(){this.stopRefresher();sc.helpers.debug("Starting refresher");if(this.refresh_time>1000){sc.helpers.debug("Refresh time is "+this.refresh_time+"ms");this.refresher=setInterval(this.refresh,this.refresh_time);}else{sc.helpers.debug("Not starting refresher; refresh time is "+this.refresh_time+"ms");}};SpazTimeline.prototype.stopRefresher=function(){sc.helpers.debug("Stopping refresher");clearInterval(this.refresher);};SpazTimeline.prototype.cleanup=function(){sch.debug("Cleaning up timeline");this.stopListening();this.stopRefresher();};SpazTimeline.prototype.addItems=function(c){sch.debug("Adding items to timeline");var b=[];var d="";for(var a=0;a<c.length;a++){b.push(this.renderItem(c[a],this.renderer));}if(this.add_method==="append"){b.reverse();d=b.join("");this.append(d);}else{d=b.join("");this.prepend(d);}this.removeExtraItems();};SpazTimeline.prototype.renderItem=function(b,c){sch.debug("Rendering item in timeline");var a=c(b);return a;};SpazTimeline.prototype.removeExtraItems=function(){sch.debug("Removing extra items in timeline");if(this.add_method==="append"){var a=true;}else{a=false;}sc.helpers.removeExtraElements(this.getEntrySelector(),this.max_items,a);};SpazTimeline.prototype.removeItems=function(a){};SpazTimeline.prototype.removeItem=function(a){};SpazTimeline.prototype.itemExists=function(a){sch.debug("Checking it item ("+a+") exists in timeline");var b=this.select(a);if(b.length>0){return true;}else{return false;}};SpazTimeline.prototype.hideItems=function(a){sch.debug("Hiding items in timeline");this.filterItems(a,"blacklist");};SpazTimeline.prototype.showItems=function(a){sch.debug("Showing items in timeline");this.filterItems(a,"whitelist");};SpazTimeline.prototype.filterItems=function(a,b){};SpazTimeline.prototype.sortItems=function(a,c){sch.debug("Sorting items in timeline");var b=this.select(a);b.sort(c);};SpazTimeline.prototype.select=function(a,b){if(!b){b=this.timeline_container_selector;}return jQuery(a,b).get();};SpazTimeline.prototype.prepend=function(a){jQuery(this.timeline_container_selector).prepend(a);};SpazTimeline.prototype.append=function(a){jQuery(this.timeline_container_selector).append(a);};SpazTimeline.prototype.getEntrySelector=function(){return this.timeline_container_selector+" "+this.timeline_item_selector;};SpazTimelineFilter=function(a){if(!a){a={};}if(a.type!=="whitelist"){a.type="blacklist";}this.settings={name:a.name||"unnamed",type:a.type,usernames_show:a.usernames_show||[],usernames_hide:a.usernames_hide||[],content_show:a.content_show||[],content_hide:a.content_hide||[],filter_class_prefix:a.filter_class_prefix||"customfilter-",timeline_selector:a.timeline_selector||"div.timeline",entry_selector:a.entry_selector||"div.timeline-entry",username_attr:a.username_attr||"data-user-screen_name",content_selector:a.content_selector||"div.timeline-entry status-text",style_selector:a.style_selector||'style[title="custom-timeline-filters"]'};};SpazTimelineFilter.prototype.getBaseSelector=function(){var a=this.settings.timeline_selector+"."+this.getTimelineClass()+" "+this.settings.entry_selector;return a;};SpazTimelineFilter.prototype.getTimelineClass=function(){return this.settings.filter_class_prefix+this.settings.name;};SpazTimelineFilter.prototype.getUserCSS=function(){var a="",d="",e=[],b;a=this.getBaseSelector();if(this.settings.type==="whitelist"){d=a+" { display:none; }";e.push(d);}else{if(this.settings.type==="blacklist"){d=a+" { display:block; }";e.push(d);}else{return null;}}for(var c=0;c<this.settings.usernames_show.length;c++){b=this.settings.usernames_show[c];d=a+"["+this.settings.username_attr+"='"+b+"'] { display:block; }";e.push(d);}for(var c=0;c<this.settings.usernames_hide.length;c++){b=this.settings.usernames_show[c];d=a+"["+this.settings.username_attr+"='"+b+"'] { display:none; }";e.push(d);}return e.join("\n");};SpazTimelineFilter.prototype.parseUsersFromString=function(c,b){if(b!=="hide"){b="show";}var d=c.split(",");for(var a=0;a<d.length;a++){d[a]=sch.trim(d[a]);}this.parseUsersFromArray(d,b);};SpazTimelineFilter.prototype.parseUsersFromArray=function(a,b){if(b!=="hide"){b="show";}if(b==="hide"){this.usernames_hide=a;}else{this.usernames_show=a;}};SpazTimelineFilter.prototype.addUser=function(b,a){if(a!=="hide"){a="show";}var c=sch.trim(b);if(a==="hide"){this.usernames_hide.push(c);}else{this.usernames_show.push(c);}};SpazTimelineFilter.prototype.parseContentStringsFromString=function(d,c){if(c!=="hide"){c="show";}var b=d.split(",");for(var a=0;a<b.length;a++){b[a]=sch.trim(b[a]);}this.parseContentStringsFromArray(b,c);};SpazTimelineFilter.prototype.parseContentStringsFromArray=function(a,b){if(b!=="hide"){b="show";}if(b==="hide"){this.content_hide=a;}else{this.content_show=a;}};SpazTimelineFilter.prototype.addContentString=function(c,b){if(b!=="hide"){b="show";}var a=sch.trim(c);if(b==="hide"){this.content_hide.push(a);}else{this.content_show.push(a);}};SpazTimelineFilter.prototype.settingsToJSON=function(){return sch.enJSON(this.settings);};SpazTimelineFilter.prototype.settingsFromJSON=function(a){this.settings=sch.deJSON(a);};SpazTimelineFilter.prototype.applyUserCSS=function(){jQuery(this.settings.style_selector).text(this.getUserCSS());};SpazTimelineFilter.prototype.disableUserCSS=function(){jQuery(this.settings.style_selector).text("");};SpazTimelineFilter.prototype.applyContentFilters=function(){var d;var a=this.buildContentFilterSelectors();var c=jQuery(this.getBaseSelector());for(var b=0;b<a.hide.length;b++){c.filter(a.hide[b]).hide();}for(var b=0;b<a.show.length;b++){c.filter(a.show[b]).show();}};SpazTimelineFilter.prototype.disableContentFilters=function(){var a=jQuery(this.getBaseSelector());a.filter().show();};SpazTimelineFilter.prototype.buildContentFilterSelectors=function(){var a={hide:[],show:[]};for(var b=0;b<this.settings.content_hide.length;b++){thiscontent=this.settings.content_hide[b];a.hide.push(':contains("'+thiscontent+'")');}for(var b=0;b<this.settings.content_show.length;b++){thiscontent=this.settings.content_show[b];a.show.push(':contains("'+thiscontent+'")');}return a;};SpazTimelineFilter.prototype.apply=function(){this.applyUserCSS();this.applyContentFilters();};SpazTimelineFilter.prototype.disable=function(){this.disableUserCSS();this.disableContentFilters();};var sc,DOMParser,jQuery,sch;if(!sc.events){sc.events={};}sc.events.tmdbMethodSuccess="tmdbMethodSuccess";sc.events.tmdbMethodFailure="tmdbMethodFailure";sc.events.tmdbMovieSearchSuccess="tmdbMovieSearchSuccess";sc.events.tmdbMovieSearchFailure="tmdbMovieSearchFailure";sc.events.tmdbMovieIMDBLookupSuccess="tmdbMovieIMDBLookupSuccess";sc.events.tmdbMovieIMDBLookupFailure="tmdbMovieIMDBLookupFailure";sc.events.tmdbMovieGetInfoSuccess="tmdbMovieGetInfoSuccess";sc.events.tmdbMovieGetInfoFailure="tmdbMovieGetInfoFailure";sc.events.tmdbMovieGetImagesSuccess="tmdbMovieGetImagesSuccess";sc.events.tmdbMovieGetImagesFailure="tmdbMovieGetImagesFailure";sc.events.tmdbPersonSearchSuccess="tmdbPersonSearchSuccess";sc.events.tmdbPersonSearchFailure="tmdbPersonSearchFailure";sc.events.tmdbPersonGetInfoSuccess="tmdbPersonGetInfoSuccess";sc.events.tmdbPersonGetInfoFailure="tmdbPersonGetInfoFailure";sc.events.tmdbHashGetInfoSuccess="tmdbHashGetInfoSuccess";sc.events.tmdbHashGetInfoFailure="tmdbHashGetInfoFailure";function SpazTMDB(a){a=sch.defaults({apikey:null,lang:"en",format:"json",eventTarget:document},a);this.apikey=a.apikey;this.lang=a.lang;this.format=a.format;this.eventTarget=a.eventTarget;this.baseURL="http://api.themoviedb.org/2.1/";}SpazTMDB.prototype.setAPIKey=function(a){this.apikey=a;};SpazTMDB.prototype.getAPIKey=function(){return this.apikey;};SpazTMDB.prototype.movieSearch=function(b,c,a){this.callMethod({method:"Movie.search",value:b,successEvent:sc.events.tmdbMovieSearchSuccess,failureEvent:sc.events.tmdbMovieSearchFailure,onSuccess:c,onFailure:a});};SpazTMDB.prototype.movieInfo=function(c,b,a){this.callMethod({method:"Movie.getInfo",value:c,successEvent:sc.events.tmdbMovieGetInfoSuccess,failureEvent:sc.events.tmdbMovieGetInfoFailure,onSuccess:b,onFailure:a});};SpazTMDB.prototype.movieImages=function(c,b,a){this.callMethod({method:"Movie.getImages",value:c,successEvent:sc.events.tmdbMovieGetInfoSuccess,failureEvent:sc.events.tmdbMovieGetInfoFailure,onSuccess:b,onFailure:a});};SpazTMDB.prototype.movieInfoIMDB=function(c,b,a){this.callMethod({method:"Movie.imdbLookup",value:c,successEvent:sc.events.tmdbMovieIMDBLookupSuccess,failureEvent:sc.events.tmdbMovieIMDBLookupFailure,onSuccess:b,onFailure:a});};SpazTMDB.prototype.personInfo=function(c,b,a){this.callMethod({method:"Person.getInfo",value:c,successEvent:sc.events.tmdbPersonGetInfoSuccess,failureEvent:sc.events.tmdbPersonGetInfoFailure,onSuccess:b,onFailure:a});};SpazTMDB.prototype.personSearch=function(a,c,b){this.callMethod({method:"Person.search",value:a,successEvent:sc.events.tmdbPersonSearchSuccess,failureEvent:sc.events.tmdbPersonSearchFailure,onSuccess:c,onFailure:b});};SpazTMDB.prototype.movieInfoHash=function(b,c,a){this.callMethod({method:"Hash.getInfo",value:b,successEvent:sc.events.tmdbHashGetInfoSuccess,failureEvent:sc.events.tmdbHashGetInfoFailure,onSuccess:c,onFailure:a});};SpazTMDB.prototype.getURL=function(c,b){var a=this.baseURL+c+"/"+this.lang+"/"+this.format+"/"+this.apikey+"/"+encodeURIComponent(b);return a;};SpazTMDB.prototype.callMethod=function(c){var b=this;c=sch.defaults({method:"Movie.search",value:"Road House",successEvent:sc.events.tmdbMethodSuccess,failureEvent:sc.events.tmdbMethodFailure,onSuccess:null,onFailure:null},c);var a=this.getURL(c.method,c.value);jQuery.ajax({url:a,type:"GET",success:function(d,e){if(c.onSuccess){c.onSuccess.call(b,d,e);}sch.trigger(c.successEvent,b.eventTarget,d);},error:function(f,e,d){if(c.onFailure){c.onFailure.call(b,f,e,d);}sch.trigger(c.failure,b.eventTarget,{url:a,xhr:f,msg:e});}});};var sc,jQuery,Mojo,use_palmhost_proxy;var SPAZCORE_SECTION_FRIENDS="friends";var SPAZCORE_SECTION_HOME="home";var SPAZCORE_SECTION_REPLIES="replies";var SPAZCORE_SECTION_DMS="dms";var SPAZCORE_SECTION_FAVORITES="favorites";var SPAZCORE_SECTION_COMBINED="combined";var SPAZCORE_SECTION_PUBLIC="public";var SPAZCORE_SECTION_SEARCH="search";var SPAZCORE_SECTION_USER="user-timeline";var SPAZCORE_SECTION_FRIENDLIST="friendslist";var SPAZCORE_SECTION_FOLLOWERSLIST="followerslist";var SPAZCORE_SECTION_USERLISTS="userlists";var SPAZCORE_SERVICE_TWITTER="twitter";var SPAZCORE_SERVICE_IDENTICA="identi.ca";var SPAZCORE_SERVICE_WORDPRESS_TWITTER="wordpress-twitter";var SPAZCORE_SERVICE_CUSTOM="custom";var SPAZCORE_SERVICEURL_TWITTER="https://api.twitter.com/1/";var SPAZCORE_SERVICEURL_IDENTICA="https://identi.ca/api/";var SPAZCORE_SERVICEURL_WORDPRESS_TWITTER="https://twitter-api.wordpress.com/";function SpazTwit(d,a,b){this.username=d;this.password=a;this.opts=b||{};this.opts.event_mode=this.opts.event_mode||"DOM";this.opts.event_target=this.opts.event_target||document;this.opts.timeout=this.opts.timeout||this.DEFAULT_TIMEOUT;this.opts.oauth_consumer=this.opts.oauth_consumer||null;this.setSource("SpazCore");this.initializeData();this.initializeCombinedTracker();this.cache={users:{},posts:{}};this.me={};this.setBaseURL(SPAZCORE_SERVICEURL_TWITTER);if(sc&&sc.helpers&&sc.helpers.dump){window.dump=sc.helpers.dump;}else{var c=function(e){return;};}}SpazTwit.prototype.DEFAULT_TIMEOUT=1000*60;SpazTwit.prototype.getUsername=function(){return this.username;};SpazTwit.prototype.getPassword=function(){return this.password;};SpazTwit.prototype.getLastId=function(a){return this.data[a].lastid;};SpazTwit.prototype.setLastId=function(a,b){this.data[a].lastid=parseInt(b,10);};SpazTwit.prototype.initializeData=function(){this.data={};this.data[SPAZCORE_SECTION_HOME]={lastid:1,items:[],newitems:[],max:200,min_age:5*60};this.data[SPAZCORE_SECTION_FRIENDS]={lastid:1,items:[],newitems:[],max:200,min_age:5*60};this.data[SPAZCORE_SECTION_REPLIES]={lastid:1,items:[],newitems:[],max:50,min_age:5*60};this.data[SPAZCORE_SECTION_DMS]={lastid:1,items:[],newitems:[],max:50,min_age:5*60};this.data[SPAZCORE_SECTION_FAVORITES]={lastid:1,items:[],newitems:[],max:100,min_age:5*60};this.data[SPAZCORE_SECTION_COMBINED]={items:[],newitems:[],max:400,min_age:5*60};this.data[SPAZCORE_SECTION_FRIENDLIST]={items:[],newitems:[],max:500,min_age:5*60};this.data[SPAZCORE_SECTION_FOLLOWERSLIST]={items:[],newitems:[],max:500,min_age:5*60};this.data[SPAZCORE_SECTION_SEARCH]={lastid:0,items:[],newitems:[],lastresultdata:{},max:200,min_age:30};this.data[SPAZCORE_SECTION_USERLISTS]={items:[],newitems:[],max:500,min_age:5*60};};SpazTwit.prototype.initializeCombinedTracker=function(){this.combined_finished={};this.combined_finished[SPAZCORE_SECTION_HOME]=false;this.combined_finished[SPAZCORE_SECTION_REPLIES]=false;this.combined_finished[SPAZCORE_SECTION_DMS]=false;this.combined_errors=[];};SpazTwit.prototype.combinedTimelineFinished=function(){for(var a in this.combined_finished){if(!this.combined_finished[a]){return false;}}return true;};SpazTwit.prototype.combinedTimelineHasErrors=function(){if(this.combined_errors.length>0){return true;}else{return false;}};SpazTwit.prototype.setBaseURL=function(a){var b=a.charAt(a.length-1);if(b!=="/"){a=a+"/";}this.baseurl=a;};SpazTwit.prototype.setBaseURLByService=function(a){var b="";switch(a){case SPAZCORE_SERVICE_TWITTER:b=SPAZCORE_SERVICEURL_TWITTER;break;case SPAZCORE_SERVICE_IDENTICA:b=SPAZCORE_SERVICEURL_IDENTICA;break;case SPAZCORE_SERVICE_WORDPRESS_TWITTER:b=SPAZCORE_SERVICEURL_WORDPRESS_TWITTER;break;default:b=SPAZCORE_SERVICEURL_TWITTER;break;}this.baseurl=b;};SpazTwit.prototype.setCredentials=function(b,a){this.username=b;this.password=a;};SpazTwit.prototype.setOAuthConsumer=function(a){this.opts.oauth_consumer=a;};SpazTwit.prototype.setSource=function(a){this.source=a;};SpazTwit.prototype.getAPIURL=function(b,a){var c={};c.public_timeline="statuses/public_timeline.json";c.friends_timeline="statuses/friends_timeline.json";c.home_timeline="statuses/home_timeline.json";c.user_timeline="statuses/user_timeline.json";c.replies_timeline="statuses/replies.json";c.show="statuses/show/{{ID}}.json";c.favorites="favorites.json";c.user_favorites="favorites/{{ID}}.json";c.dm_timeline="direct_messages.json";c.dm_sent="direct_messages/sent.json";c.friendslist="statuses/friends.json";c.followerslist="statuses/followers.json";c.show_user="users/show/{{ID}}.json";c.featuredlist="statuses/featured.json";c.update="statuses/update.json";c.destroy_status="statuses/destroy/{{ID}}.json";c.friendship_create="friendships/create/{{ID}}.json";c.friendship_destroy="friendships/destroy/{{ID}}.json";c.block_create="blocks/create/{{ID}}.json";c.block_destroy="blocks/destroy/{{ID}}.json";c.start_notifications="notifications/follow/{{ID}}.json";c.stop_notifications="notifications/leave/{{ID}}.json";c.favorites_create="favorites/create/{{ID}}.json";c.favorites_destroy="favorites/destroy/{{ID}}.json";c.saved_searches_create="saved_searches/create.json";c.saved_searches_destroy="saved_searches/destroy/{{ID}}.json";c.verify_credentials="account/verify_credentials.json";c.ratelimit_status="account/rate_limit_status.json";c.update_profile="account/update_profile.json";c.saved_searches="saved_searches.json";c.lists="{{USER}}/lists.json";c.lists_list="{{USER}}/lists/{{SLUG}}.json";c.lists_memberships="{{USER}}/lists/memberships.json";c.lists_timeline="{{USER}}/lists/{{SLUG}}/statuses.json";c.lists_members="{{USER}}/{{SLUG}}/members.json";c.lists_check_member="{{USER}}/{{SLUG}}/{{ID}}.json";c.lists_subscribers="{{USER}}/{{SLUG}}/subscribers.json";c.lists_check_subscriber="{{USER}}/{{SLUG}}/subscribers/{{ID}}.json";if(this.baseurl===SPAZCORE_SERVICEURL_TWITTER){c.search="http://search.twitter.com/search.json";c.trends="http://search.twitter.com/trends.json";}else{c.search="search.json";c.trends="trends.json";}c.test="help/test.json";c.downtime_schedule="help/downtime_schedule.json";if(c[b].indexOf("{{ID}}")>-1){if(typeof(a)==="string"){c[b]=c[b].replace("{{ID}}",a);}else{if(a&&typeof(a)==="object"){c[b]=c[b].replace("{{ID}}",a.id);}}}if(c[b].indexOf("{{USER}}")>-1){if(a&&typeof(a)==="object"){c[b]=c[b].replace("{{USER}}",a.user);}}if(c[b].indexOf("{{SLUG}}")>-1){if(a&&typeof(a)==="object"){c[b]=c[b].replace("{{SLUG}}",a.slug);}}if(c[b]){if(a&&typeof a!=="string"){a="?"+jQuery.param(a);}else{a="";}if(this.baseurl===SPAZCORE_SERVICEURL_TWITTER&&(b==="search"||b==="trends")){return this._postProcessURL(c[b]+a);}else{return this._postProcessURL(this.baseurl+c[b]+a);}}else{return false;}};SpazTwit.prototype.verifyCredentials=function(g,b,f,c){var a=this.getAPIURL("verify_credentials");if(!g){g=this.username;}if(!b){b=this.password;}var d={url:a,username:g,password:b,process_callback:this._processAuthenticatedUser,success_event_type:"verify_credentials_succeeded",failure_event_type:"verify_credentials_failed",success_callback:f,failure_callback:c,method:"GET"};var e=this._callMethod(d);};SpazTwit.prototype._processAuthenticatedUser=function(b,a){this.me=b;this.initializeData();if(a.success_callback){a.success_callback(this.me);}this.triggerEvent(a.success_event_type,this.me);};SpazTwit.prototype.getPublicTimeline=function(d,b){var a=this.getAPIURL("public_timeline");var c=this._getTimeline({url:a,success_callback:d,failure_callback:b,success_event_type:"new_public_timeline_data"});};SpazTwit.prototype.getHomeTimeline=function(a,e,g,b,h,d){if(!g){g=null;}if(!e){e=50;}if(!a){if(this.data[SPAZCORE_SECTION_HOME].lastid&&this.data[SPAZCORE_SECTION_HOME].lastid>1){a=this.data[SPAZCORE_SECTION_HOME].lastid;}else{a=1;}}if(!b){b={};}if(b.combined){b.section=SPAZCORE_SECTION_HOME;}var f={};f.since_id=a;f.count=e;if(g){f.page=g;}var c=this.getAPIURL("home_timeline",f);this._getTimeline({url:c,username:this.username,password:this.password,process_callback:this._processHomeTimeline,success_callback:h,failure_callback:d,success_event_type:"new_home_timeline_data",failure_event_type:"error_home_timeline_data",processing_opts:b});};SpazTwit.prototype._processHomeTimeline=function(a,c,b){sc.helpers.dump("Processing "+a.length+" items returned from home method");this._processTimeline(SPAZCORE_SECTION_HOME,a,c,b);};SpazTwit.prototype.getFriendsTimeline=function(a,e,g,b,h,d){if(!g){g=null;}if(!e){e=50;}if(!a){if(this.data[SPAZCORE_SECTION_FRIENDS].lastid&&this.data[SPAZCORE_SECTION_FRIENDS].lastid>1){a=this.data[SPAZCORE_SECTION_FRIENDS].lastid;}else{a=1;}}if(!b){b={};}if(b.combined){b.section=SPAZCORE_SECTION_FRIENDS;}var f={};f.since_id=a;f.count=e;if(g){f.page=g;}var c=this.getAPIURL("friends_timeline",f);this._getTimeline({url:c,username:this.username,password:this.password,process_callback:this._processFriendsTimeline,success_callback:h,failure_callback:d,success_event_type:"new_friends_timeline_data",failure_event_type:"error_friends_timeline_data",processing_opts:b});};SpazTwit.prototype._processFriendsTimeline=function(a,c,b){sc.helpers.dump("Processing "+a.length+" items returned from friends method");this._processTimeline(SPAZCORE_SECTION_FRIENDS,a,c,b);};SpazTwit.prototype.getReplies=function(a,e,g,b,h,d){if(!g){g=null;}if(!e){e=null;}if(!a){if(this.data[SPAZCORE_SECTION_REPLIES].lastid&&this.data[SPAZCORE_SECTION_REPLIES].lastid>1){a=this.data[SPAZCORE_SECTION_REPLIES].lastid;}else{a=1;}}if(!b){b={};}if(b.combined){b.section=SPAZCORE_SECTION_REPLIES;}var f={};f.since_id=a;if(g){f.page=g;}if(e){f.count=e;}var c=this.getAPIURL("replies_timeline",f);this._getTimeline({url:c,username:this.username,password:this.password,process_callback:this._processRepliesTimeline,success_callback:h,failure_callback:d,success_event_type:"new_replies_timeline_data",failure_event_type:"error_replies_timeline_data",processing_opts:b});};SpazTwit.prototype._processRepliesTimeline=function(a,c,b){sc.helpers.dump("Processing "+a.length+" items returned from replies method");this._processTimeline(SPAZCORE_SECTION_REPLIES,a,c,b);};SpazTwit.prototype.getDirectMessages=function(a,e,g,b,h,d){if(!g){g=null;}if(!e){e=null;}if(!a){if(this.data[SPAZCORE_SECTION_DMS].lastid&&this.data[SPAZCORE_SECTION_DMS].lastid>1){a=this.data[SPAZCORE_SECTION_DMS].lastid;}else{a=1;}}if(!b){b={};}if(b.combined){b.section=SPAZCORE_SECTION_DMS;}var f={};f.since_id=a;if(g){f.page=g;}if(e){f.count=e;}var c=this.getAPIURL("dm_timeline",f);this._getTimeline({url:c,username:this.username,password:this.password,process_callback:this._processDMTimeline,success_callback:h,failure_callback:d,success_event_type:"new_dms_timeline_data",failure_event_type:"error_dms_timeline_data",processing_opts:b});};SpazTwit.prototype._processDMTimeline=function(a,c,b){sc.helpers.dump("Processing "+a.length+" items returned from DM method");this._processTimeline(SPAZCORE_SECTION_DMS,a,c,b);};SpazTwit.prototype.getFavorites=function(e,a,f,c){if(!e){e=null;}if(!a){a={};}var d={};if(e){d.page=e;}var b=this.getAPIURL("favorites",d);this._getTimeline({url:b,username:this.username,password:this.password,process_callback:this._processFavoritesTimeline,success_callback:f,failure_callback:c,success_event_type:"new_favorites_timeline_data",failure_event_type:"error_favorites_timeline_data",processing_opts:a});};SpazTwit.prototype._processFavoritesTimeline=function(a,c,b){this._processTimeline(SPAZCORE_SECTION_FAVORITES,a,c,b);};SpazTwit.prototype.getSent=function(a,c,d,e,b){};SpazTwit.prototype.getSentDirectMessages=function(a,c,d,b){};SpazTwit.prototype.getUserTimeline=function(g,c,e,f,b){if(!g){return;}if(!e){e=null;}if(!c){c=10;}var d={};d.id=g;d.count=c;if(e){d.page=e;}var a=this.getAPIURL("user_timeline",d);this._getTimeline({url:a,username:this.username,password:this.password,process_callback:this._processUserTimeline,success_callback:f,failure_callback:b,success_event_type:"new_user_timeline_data",failure_event_type:"error_user_timeline_data"});};SpazTwit.prototype._processUserTimeline=function(a,c,b){this._processTimeline(SPAZCORE_SECTION_USER,a,c,b);};SpazTwit.prototype.getCombinedTimeline=function(e,f,b){var g,j,c,l,h,n,m,d=null;var a={combined:true};if(e){if(e.friends_count){j=e.friends_count;}if(e.home_count){g=e.home_count;}if(e.replies_count){c=e.replies_count;}if(e.dm_count){l=e.dm_count;}if(e.home_since){h=e.home_since;}if(e.friends_since){n=e.friend_since;}if(e.replies_since){d=e.replies_since;}if(e.dm_since){m=e.dm_since;}if(!g){g=j;}if(!h){h=n;}if(e.force){a.force=true;}}this.getHomeTimeline(h,g,null,a,f,b);this.getReplies(d,c,null,a,f,b);this.getDirectMessages(m,l,null,a,f,b);};SpazTwit.prototype.search=function(j,l,b,h,c,e,g,d){if(!h){h=1;}if(!b){b=50;}var f={};f.q=j;f.rpp=b;f.page=h;if(c){f.lang=c;}if(e){f.geocode=e;}var a=this.getAPIURL("search",f);this._getTimeline({url:a,process_callback:this._processSearchTimeline,success_callback:g,failure_callback:d,success_event_type:"new_search_timeline_data",failure_event_type:"error_search_timeline_data"});};SpazTwit.prototype._processSearchTimeline=function(g,e,d){if(!d){d={};}this.data[SPAZCORE_SECTION_SEARCH].newitems=[];this.data[SPAZCORE_SECTION_SEARCH].lastresultdata=g;var b=g.results;if(b.length>0){for(var c=0;c<b.length;c++){b[c]=this._processSearchItem(b[c],SPAZCORE_SECTION_SEARCH);}b.sort(this._sortItemsAscending);var f=b[b.length-1].id;this.data[SPAZCORE_SECTION_SEARCH].lastid=f;sc.helpers.dump("this.data["+SPAZCORE_SECTION_SEARCH+"].lastid:"+this.data[SPAZCORE_SECTION_SEARCH].lastid);this.data[SPAZCORE_SECTION_SEARCH].newitems=b;this.data[SPAZCORE_SECTION_SEARCH].items=this.data[SPAZCORE_SECTION_SEARCH].items.concat(this.data[SPAZCORE_SECTION_SEARCH].newitems);this.data[SPAZCORE_SECTION_SEARCH].items=this.removeDuplicates(this.data[SPAZCORE_SECTION_SEARCH].items);sch.debug("NOT removing extras from search -- we don't do that anymore");var a={since_id:g.since_id,max_id:g.max_id,refresh_url:g.refresh_url,results_per_page:g.results_per_page,next_page:g.next_page,completed_in:g.completed_in,page:g.page,query:g.query};if(e.success_callback){e.success_callback(this.data[SPAZCORE_SECTION_SEARCH].newitems,a);}this.triggerEvent(e.success_event_type,[this.data[SPAZCORE_SECTION_SEARCH].newitems,a]);}else{if(e.success_callback){e.success_callback(null,[]);}this.triggerEvent(e.success_event_type,[]);}};SpazTwit.prototype._processSearchItem=function(b,a){b.SC_timeline_from=a;if(this.username){b.SC_user_received_by=this.username;}b.SC_is_search=true;if(!b.SC_created_at_unixtime){b.SC_created_at_unixtime=sc.helpers.httpTimeToInt(b.created_at);}if(!b.SC_text_raw){b.SC_text_raw=b.text;}if(!b.in_reply_to_screen_name&&b.in_reply_to_user_id){}if(!b.SC_retrieved_unixtime){b.SC_retrieved_unixtime=sc.helpers.getTimeAsInt();}b.user={profile_image_url:b.profile_image_url,screen_name:b.from_user,id:b.from_user_id};b.source=sc.helpers.fromHTMLSpecialChars(b.source);return b;};SpazTwit.prototype.getTrends=function(c,b){var a=this.getAPIURL("trends");this._getTimeline({url:a,process_callback:this._processTrends,success_callback:c,failure_callback:b,success_event_type:"new_trends_data",failure_event_type:"error_trends_data"});};SpazTwit.prototype._processTrends=function(e,d,c){if(!c){c={};}var a=e.trends;if(a.length>0){for(var b=0;b<a.length;b++){a[b].searchterm=a[b].name;if(/\s+/.test(a[b].searchterm)){a[b].searchterm='"'+a[b].searchterm+'"';}}if(d.success_callback){d.success_callback(a);}this.triggerEvent(d.success_event_type,a);}};SpazTwit.prototype._getTimeline=function(b){b=sch.defaults({method:"GET",timeout:this.DEFAULT_TIMEOUT,url:null,data:null,username:null,password:null,process_callback:null,processing_opts:null,success_event_type:null,failure_event_type:null,success_callback:null,failure_callback:null},b);var a=this;var c=jQuery.ajax({timeout:b.timeout,complete:function(e,d){sc.helpers.dump(b.url+" complete:"+d);if(d==="timeout"){a.triggerEvent(b.failure_event_type,{url:b.url,xhr:e,msg:d});}},error:function(j,h,d){sc.helpers.dump(b.url+' error:"'+h+'"');if(h.toLowerCase().indexOf("timeout")!==-1){a.triggerEvent(document,b.failure_event_type,{url:b.url,xhr:null,msg:h});}else{if(j){if(!j.readyState<4){sc.helpers.dump("Error:"+j.status+" from "+b.url);if(j.responseText){try{var f=sc.helpers.deJSON(j.responseText);}catch(g){sc.helpers.dump(g.name+":"+g.message);f=j.responseText;}}}if(b.failure_callback){b.failure_callback(j,h,d);}if(b.failure_event_type){sc.helpers.dump("opts.failure_event_type:"+b.failure_event_type);a.triggerEvent(b.failure_event_type,{url:b.url,xhr:j,msg:h});}}else{sc.helpers.dump("Error:Unknown from "+b.url);if(b.failure_callback){b.failure_callback(null,h,d);}if(b.failure_event_type){a.triggerEvent(b.failure_event_type,{url:b.url,xhr:j,msg:"Unknown Error"});}}}a.triggerEvent("spaztwit_ajax_error",{url:b.url,xhr:j,msg:h});if(b.processing_opts&&b.processing_opts.combined){sc.helpers.dump("adding to combined processing errors");a.combined_errors.push({url:b.url,xhr:j,msg:h,section:b.processing_opts.section});a.combined_finished[b.processing_opts.section]=true;sc.helpers.dump(a.combined_errors);sc.helpers.dump(a.combined_finished);if(b.process_callback){b.process_callback.call(a,[],b,b.processing_opts);}}},success:function(d){sc.helpers.dump(b.url+" success! data:"+d);try{d=sc.helpers.deJSON(d);}catch(f){a.triggerEvent(document,b.failure_event_type,{url:b.url,xhr:c,msg:"Error decoding data from server"});}if(b.process_callback){b.process_callback.call(a,d,b,b.processing_opts);}else{if(b.success_callback){sch.error("CALLING SUCCESS CALLBACK");b.success_callback(d);}a.triggerEvent(b.success_event_type,d);}},beforeSend:function(e){sc.helpers.dump("beforesend");if(a.opts.oauth_consumer){var d=consumer.getAuthHeader({method:b.method,url:b.url,parameters:a._convertParamsForOAuth(b.data)});e.setRequestHeader("Authorization",d);}else{if(b.username&&b.password){e.setRequestHeader("Authorization","Basic "+sc.helpers.Base64.encode(b.username+":"+b.password));}}},type:b.method,url:b.url,data:b.data,dataType:"text"});return c;};SpazTwit.prototype._convertParamsForOAuth=function(b){var c=[];for(var a in b){c.push([a,b[a]]);}return c;};SpazTwit.prototype._processTimeline=function(b,a,e,d){sch.debug(e);if(!d){d={};}if(!b===SPAZCORE_SECTION_USER){this.data[b].newitems=[];}if(a.length>0){for(var c=0;c<a.length;c++){a[c]=this._processItem(a[c],b);}a.sort(this._sortItemsAscending);if(b===SPAZCORE_SECTION_USER){if(e.success_callback){e.success_callback(a);}this.triggerEvent(e.success_event_type,a);}else{var f=a[a.length-1].id;this.data[b].lastid=f;sc.helpers.dump("this.data["+b+"].lastid:"+this.data[b].lastid);this.data[b].newitems=a;this._addToSectionItems(b,this.data[b].newitems);if(!d.combined){if(e.success_callback){e.success_callback(this.data[b].newitems);}this.triggerEvent(e.success_event_type,this.data[b].items);}else{this.combined_finished[b]=true;sc.helpers.dump("this.combined_finished["+b+"]:"+this.combined_finished[b]);}this.data[SPAZCORE_SECTION_COMBINED].newitems=this.data[SPAZCORE_SECTION_COMBINED].newitems.concat(this.data[b].newitems);}}else{if(!d.combined){if(e.success_callback){e.success_callback();}this.triggerEvent(e.success_event_type);}else{this.combined_finished[b]=true;}}if(this.combinedTimelineFinished()){this._addToSectionItems(SPAZCORE_SECTION_COMBINED,this.data[SPAZCORE_SECTION_COMBINED].newitems,this._sortItemsByDateAsc);this.data[SPAZCORE_SECTION_COMBINED].newitems=this._cleanupItemArray(this.data[SPAZCORE_SECTION_COMBINED].newitems,this.data[SPAZCORE_SECTION_COMBINED].max,this._sortItemsByDateAsc);if(this.combinedTimelineHasErrors()){if(e.failure_callback){e.failure_callback(this.combined_errors);}this.triggerEvent("error_combined_timeline_data",this.combined_errors);}if(e.success_callback){e.success_callback(this.data[SPAZCORE_SECTION_COMBINED].newitems);}sch.debug("this.data[SPAZCORE_SECTION_COMBINED].newitems has "+this.data[SPAZCORE_SECTION_COMBINED].newitems.length+" items");this.triggerEvent("new_combined_timeline_data",this.data[SPAZCORE_SECTION_COMBINED].newitems);this.data[SPAZCORE_SECTION_COMBINED].newitems=[];this.initializeCombinedTracker();}};SpazTwit.prototype._addToSectionItems=function(b,a,c){this.data[b].items=this.data[b].items.concat(a);this._cleanupItemArray(this.data[b].items,this.data[b].max,c);};SpazTwit.prototype._cleanupItemArray=function(b,a,c){if(c){b=b.sort(c);}b=this.removeDuplicates(b);sch.debug("NOT removing extras -- we don't do that anymore");return b;};SpazTwit.prototype._processItem=function(b,a){b.SC_timeline_from=a;if(this.username){b.SC_user_received_by=this.username;}if((b.in_reply_to_screen_name&&b.SC_user_received_by)){if(b.in_reply_to_screen_name.toLowerCase()===b.SC_user_received_by.toLowerCase()){b.SC_is_reply=true;}}if(b.retweeted_status){b.SC_is_retweet=true;}if(a===SPAZCORE_SECTION_REPLIES){b.SC_is_reply=true;}if(this.username&&sc.helpers.containsScreenName(b.text,this.username)){b.SC_is_reply=true;}if(b.recipient_id&&b.sender_id){b.SC_is_dm=true;}if(!b.SC_created_at_unixtime){b.SC_created_at_unixtime=sc.helpers.httpTimeToInt(b.created_at);}if(!b.SC_text_raw){b.SC_text_raw=b.text;}if(!b.in_reply_to_screen_name&&b.in_reply_to_user_id){}if(!b.SC_retrieved_unixtime){b.SC_retrieved_unixtime=sc.helpers.getTimeAsInt();}return b;};SpazTwit.prototype._processUser=function(b,a){b.SC_timeline_from=a;if(this.username){b.SC_user_received_by=this.username;}if(a===SPAZCORE_SECTION_FOLLOWERSLIST){b.SC_is_follower;}if(a===SPAZCORE_SECTION_FRIENDLIST){b.SC_is_followed;}if(!b.SC_created_at_unixtime){b.SC_created_at_unixtime=sc.helpers.httpTimeToInt(b.created_at);}if(!b.SC_retrieved_unixtime){b.SC_retrieved_unixtime=sc.helpers.getTimeAsInt();}return b;};SpazTwit.prototype._callMethod=function(b){b=sch.defaults({method:"POST",timeout:this.DEFAULT_TIMEOUT,url:null,data:null,username:null,password:null,process_callback:null,success_event_type:null,failure_event_type:null,success_callback:null,failure_callback:null},b);var d;var a=this;if(b.method){d=b.method;}else{d="POST";}var c=jQuery.ajax({timeout:this.opts.timeout,complete:function(f,e){sc.helpers.dump(b.url+" complete:"+e);},error:function(l,j,f){sc.helpers.dump(b.url+" error:"+j);if(l){if(!l.readyState<4){sc.helpers.dump("Error:"+l.status+" from "+b.url);if(l.responseText){try{var g=sc.helpers.deJSON(l.responseText);}catch(h){sc.helpers.dump(h.name+":"+h.message);g=l.responseText;}}}if(b.failure_callback){b.failure_callback(l,j,f);}if(b.failure_event_type){a.triggerEvent(b.failure_event_type,{url:b.url,xhr:l,msg:j});}}else{sc.helpers.dump("Error:Unknown from "+b.url);if(b.failure_callback){b.failure_callback(null,j,f);}if(b.failure_event_type){a.triggerEvent(b.failure_event_type,{url:b.url,xhr:null,msg:"Unknown Error"});}}a.triggerEvent("spaztwit_ajax_error",{url:b.url,xhr:l,msg:j});},success:function(e){sc.helpers.dump(b.url+" success");e=sc.helpers.deJSON(e);if(b.process_callback){b.process_callback.call(a,e,b);}else{if(b.success_callback){b.success_callback(e);}a.triggerEvent(b.success_event_type,e);}},beforeSend:function(f){sc.helpers.dump(b.url+" beforesend");if(a.opts.oauth_consumer){var e=consumer.getAuthHeader({method:b.method,url:b.url,parameters:this._convertParamsForOAuth(b.data)});f.setRequestHeader("Authorization",e);}else{if(b.username&&b.password){f.setRequestHeader("Authorization","Basic "+sc.helpers.Base64.encode(b.username+":"+b.password));}}},type:d,url:b.url,data:b.data,dataType:"text"});return c;};SpazTwit.prototype.getUser=function(a,g,c){var e={};e.id=a;var b=this.getAPIURL("show_user",e);var d={url:b,username:this.username,password:this.password,success_event_type:"get_user_succeeded",failure_event_type:"get_user_failed",success_callback:g,failure_callback:c,method:"GET"};var f=this._callMethod(d);};SpazTwit.prototype.getFriendsList=function(){var a=this.getAPIURL("friendslist");var b={url:a,username:this.username,password:this.password,process_callback:this._processFriendsList,success_event_type:"get_friendslist_succeeded",failure_event_type:"get_friendslist_failed",method:"GET"};var c=this._getTimeline(b);};SpazTwit.prototype._processFriendsList=function(a,c,b){this._processUserList(SPAZCORE_SECTION_FRIENDLIST,a,c.success_event_type,b);};SpazTwit.prototype.getFollowersList=function(){var a=this.getAPIURL("followerslist");var b={url:a,username:this.username,password:this.password,process_callback:this._processFollowersList,success_event_type:"get_followerslist_succeeded",failure_event_type:"get_followerslist_failed",method:"GET"};var c=this._getTimeline(b);};SpazTwit.prototype._processFollowersList=function(a,c,b){this._processUserList(SPAZCORE_SECTION_FOLLOWERSLIST,a,c.success_event_type,b);};SpazTwit.prototype._processUserList=function(b,a,e,d){if(!d){d={};}if(a.length>0){for(var c=0;c<a.length;c++){a[c]=this._processUser(a[c],b);sch.dump(a[c]);}a.sort(this._sortItemsAscending);var f=a[a.length-1].id;this.data[b].lastid=f;sc.helpers.dump("this.data["+b+"].lastid:"+this.data[b].lastid);this.data[b].newitems=a;this._addToSectionItems(b,this.data[b].newitems);if(e.success_callback){e.success_callback(this.data[b].newitems);}this.triggerEvent(e.success_event_type,this.data[b].newitems);}else{if(e.success_callback){e.success_callback();}this.triggerEvent(e.success_event_type);}};SpazTwit.prototype.addFriend=function(a,g,c){var e={};e.id=a;var b=this.getAPIURL("friendship_create",e);var d={url:b,username:this.username,password:this.password,success_event_type:"create_friendship_succeeded",failure_event_type:"create_friendship_failed",success_callback:g,failure_callback:c,data:e};var f=this._callMethod(d);};SpazTwit.prototype.removeFriend=function(a,g,c){var e={};e.id=a;var b=this.getAPIURL("friendship_destroy",e);var d={url:b,username:this.username,password:this.password,success_event_type:"destroy_friendship_succeeded",failure_event_type:"destroy_friendship_failed",success_callback:g,failure_callback:c,data:e};var f=this._callMethod(d);};SpazTwit.prototype.block=function(a,g,c){var e={};e.id=a;var b=this.getAPIURL("block_create",e);var d={url:b,username:this.username,password:this.password,success_event_type:"create_block_succeeded",failure_event_type:"create_block_failed",success_callback:g,failure_callback:c,data:e};var f=this._callMethod(d);};SpazTwit.prototype.unblock=function(a,g,c){var e={};e.id=a;var b=this.getAPIURL("block_destroy",e);var d={url:b,username:this.username,password:this.password,success_event_type:"destroy_block_succeeded",failure_event_type:"destroy_block_failed",success_callback:g,failure_callback:c,data:e};var f=this._callMethod(d);};SpazTwit.prototype.follow=function(a,c,b){};SpazTwit.prototype.unfollow=function(a,c,b){};SpazTwit.prototype.update=function(e,b,h,j,d){var c=this.getAPIURL("update");var g={};if(h){g.in_reply_to_status_id=h;}if(b){g.source=b;}else{g.source=this.source;}g.status=e;var f=this.username;var l=this.password;var a={url:c,username:f,password:l,data:g,process_callback:this._processUpdateReturn,success_callback:j,failure_callback:d,success_event_type:"update_succeeded",failure_event_type:"update_failed"};var m=this._callMethod(a);};SpazTwit.prototype._processUpdateReturn=function(b,a){this._processTimeline(SPAZCORE_SECTION_HOME,[b],a);};SpazTwit.prototype.destroy=function(a){};SpazTwit.prototype.destroyDirectMessage=function(a){};SpazTwit.prototype.getOne=function(g,f,b){var d={};d.id=g;var a=this.getAPIURL("show",d);var c={url:a,username:this.username,password:this.password,process_callback:this._processOneItem,success_event_type:"get_one_status_succeeded",success_callback:f,failure_callback:b,failure_event_type:"get_one_status_failed",method:"GET"};var e=this._callMethod(c);};SpazTwit.prototype._processOneItem=function(b,a){b=this._processItem(b);if(a.success_callback){a.success_callback(b);}this.triggerEvent(a.success_event_type,b);};SpazTwit.prototype.favorite=function(g,f,b){var d={};d.id=g;var a=this.getAPIURL("favorites_create",d);var c={url:a,username:this.username,password:this.password,success_event_type:"create_favorite_succeeded",failure_event_type:"create_favorite_failed",success_callback:f,failure_callback:b,data:d};var e=this._callMethod(c);};SpazTwit.prototype.unfavorite=function(g,f,b){var d={};d.id=g;var a=this.getAPIURL("favorites_destroy",d);var c={url:a,username:this.username,password:this.password,success_event_type:"destroy_favorite_succeeded",failure_event_type:"destroy_favorite_failed",success_callback:f,failure_callback:b,data:d};var e=this._callMethod(c);};SpazTwit.prototype.updateLocation=function(b,g,c){var e={};e.location=b;this.setBaseURL(SPAZCORE_SERVICEURL_TWITTER);var a=this.getAPIURL("update_profile");var d={url:a,username:this.username,password:this.password,success_event_type:"update_location_succeeded",failure_event_type:"update_location_failed",success_callback:g,failure_callback:c,data:e};var f=this._callMethod(d);};SpazTwit.prototype.updateProfile=function(d,c,b,a,e){};SpazTwit.prototype.getRateLimitStatus=function(){};SpazTwit.prototype.test=function(){};SpazTwit.prototype._postProcessURL=function(b){if(typeof Mojo!=="undefined"){if(use_palmhost_proxy){var c=/https?:\/\/.[^\/:]*(?::[0-9]+)?/;var a=b.match(c);if(a&&a[0]!==Mojo.hostingPrefix){b="/proxy?url="+encodeURIComponent(b);}return b;}else{return b;}}else{return b;}};SpazTwit.prototype._sortItemsAscending=function(d,c){return(d.id-c.id);};SpazTwit.prototype._sortItemsDescending=function(d,c){return(c.id-d.id);};SpazTwit.prototype._sortItemsByDateAsc=function(d,c){var f=sc.helpers.httpTimeToInt(d.created_at);var e=sc.helpers.httpTimeToInt(c.created_at);return(f-e);};SpazTwit.prototype._sortItemsByDateDesc=function(d,c){var f=sc.helpers.httpTimeToInt(d.created_at);var e=sc.helpers.httpTimeToInt(c.created_at);return(e-f);};SpazTwit.prototype.removeDuplicates=function(a){var c=[],b={},f=a.length;try{for(var d=0;d<f;d++){var h=a[d].id;if(!b[h]){b[h]=true;c.push(a[d]);}else{sc.helpers.dump("removing dupe "+a[d].id+', "'+a[d].text+'"');}}}catch(g){sc.helpers.dump(g.name+":"+g.message);c=a;}return c;};SpazTwit.prototype.removeExtraElements=function(c,a,b){if(!b){b=false;}var d=c.length-a;if(d>0){if(!b){sc.helpers.dump("array length is "+c.length+" > "+a+"; removing last "+d+" entries");c.splice(d*-1,d);}else{sc.helpers.dump("array length is "+c.length+" > "+a+"; removing first "+d+" entries");c.splice(0,d);}}return c;};SpazTwit.prototype.getSavedSearches=function(e,b){var a=this.getAPIURL("saved_searches");var c={url:a,username:this.username,password:this.password,success_event_type:"new_saved_searches_data",failure_event_type:"error_saved_searches_data",success_callback:e,failure_callback:b,method:"GET"};var d=this._callMethod(c);};SpazTwit.prototype.addSavedSearch=function(b,f,c){var a=this.getAPIURL("saved_searches_create");var d={url:a,username:this.username,password:this.password,success_event_type:"create_saved_search_succeeded",failure_event_type:"create_saved_search_failed",success_callback:f,failure_callback:c,data:{query:b},method:"POST"};var e=this._callMethod(d);};SpazTwit.prototype.removeSavedSearch=function(a,f,c){var b=this.getAPIURL("saved_searches_destroy",a.toString());var d={url:b,username:this.username,password:this.password,success_event_type:"destroy_saved_search_succeeded",failure_event_type:"destroy_saved_search_failed",success_callback:f,failure_callback:c,data:{id:a},method:"POST"};sch.debug("opts for removeSavedSearch");sch.debug(d);var e=this._callMethod(d);};SpazTwit.prototype.getLists=function(a,f,c){if(!a&&!this.username){return;}else{if(!a){a=this.username;}}var b=this.getAPIURL("lists",{user:a});var d={url:b,username:this.username,password:this.password,success_event_type:"get_lists_succeeded",failure_event_type:"get_lists_failed",success_callback:f,failure_callback:c,method:"GET"};var e=this._getTimeline(d);};SpazTwit.prototype._processUserLists=function(b,a,e,d){if(!d){d={};}if(a.length>0){for(var c=0;c<a.length;c++){a[c]=this._processList(a[c],b);sch.dump(a[c]);}a.sort(this._sortItemsAscending);var f=a[a.length-1].id;this.data[b].lastid=f;sc.helpers.dump("this.data["+b+"].lastid:"+this.data[b].lastid);this.data[b].newitems=a;this._addToSectionItems(b,this.data[b].newitems);if(e.success_callback){e.success_callback(this.data[b].newitems);}this.triggerEvent(e.success_event_type,this.data[b].newitems);}else{if(e.success_callback){e.success_callback();}this.triggerEvent(e.success_event_type);}};SpazTwit.prototype._processList=function(b,a){if(!b.SC_retrieved_unixtime){b.SC_retrieved_unixtime=sc.helpers.getTimeAsInt();}return b;};SpazTwit.prototype.getListInfo=function(e,a,g,c){if(!a&&!this.username){sch.error("must pass a username or have one set to get list");return;}a=a||this.username;var b=this.getAPIURL("lists_list",{user:a,slug:e});var d={url:b,username:this.username,password:this.password,success_event_type:"get_list_succeeded",failure_event_type:"get_list_failed",success_callback:g,failure_callback:c,method:"GET"};var f=this._callMethod(d);};SpazTwit.prototype.getListTimeline=function(e,a,g,c){if(!a&&!this.username){sch.error("must pass a username or have one set to get list");return;}a=a||this.username;var b=this.getAPIURL("lists_timeline",{user:a,slug:e});var d={url:b,username:this.username,password:this.password,success_event_type:"get_list_timeline_succeeded",failure_event_type:"get_list_timeline_failed",success_callback:g,failure_callback:c,method:"GET",process_callback:this._processListTimeline,processing_opts:{user:a,slug:e}};var f=this._getTimeline(d);};SpazTwit.prototype._processListTimeline=function(e,d,c){if(!c){c={};}var b=c.user||null;var a=c.slug||null;var f={statuses:e,user:b,slug:a};if(d.success_callback){d.success_callback(f);}this.triggerEvent(d.success_event_type,f);};SpazTwit.prototype.getListMembers=function(d,a){if(!a&&!this.username){sch.error("must pass a username or have one set to get list");return;}a=a||this.username;var b=this.getAPIURL("lists_members",{user:a,slug:d});var c={url:b,username:this.username,password:this.password,success_event_type:"get_list_members_succeeded",failure_event_type:"get_list_members_failed",method:"GET",process_callback:this._processListTimeline,processing_opts:{user:a,slug:d}};var e=this._getTimeline(c);};SpazTwit.prototype.addList=function(f,a,d){var e={};e.name=f;e.mode=a;e.description=d;var b=this.getAPIURL("lists",{user:this.username});var c={url:b,username:this.username,password:this.password,success_event_type:"create_list_succeeded",failure_event_type:"create_list_failed",data:e};var g=this._callMethod(c);};SpazTwit.prototype.removeList=function(d,a){if(!a&&!this.username){sch.error("must pass a username or have one set to remove list");return;}a=a||this.username;var b=this.getAPIURL("lists_list",{user:a,slug:d});var c={url:b,username:this.username,password:this.password,success_event_type:"create_list_succeeded",failure_event_type:"create_list_failed",method:"DELETE"};var e=this._callMethod(c);};SpazTwit.prototype.addUserToList=function(a,e,g){var d={};d.list_id=e;d.id=g;if(!a&&!this.username){sch.error("must pass a username or have one set to add a user to a list");return;}a=a||this.username;var b=this.getAPIURL("lists_members",{user:a,slug:e});var c={url:b,username:this.username,password:this.password,success_event_type:"create_list_succeeded",failure_event_type:"create_list_failed",data:d};var f=this._callMethod(c);};SpazTwit.prototype.removeUserFromList=function(a,e,g){var d={};d.list_id=e;d.id=g;if(!a&&!this.username){sch.error("must pass a username or have one set to remove a user from a list");return;}a=a||this.username;var b=this.getAPIURL("lists_members",{user:a,slug:e});var c={url:b,username:this.username,password:this.password,success_event_type:"create_list_succeeded",failure_event_type:"create_list_failed",data:d,method:"DELETE"};var f=this._callMethod(c);};SpazTwit.prototype.triggerEvent=function(a,b){var c=this.opts.event_target||document;b=b||null;sc.helpers.dump("TriggerEvent: target:"+c.toString()+" type:"+a+" data:"+b);if(this.opts.event_mode==="jquery"){b=[b];jQuery(c).trigger(a,b);}else{sc.helpers.trigger(a,c,b);}};if(sc){var scTwit=SpazTwit;}var sc;SpazPrefs.prototype.load=function(){var b=this.id||SPAZCORE_PREFS_STANDARD_COOKIENAME;var c=jaaulde.utils.cookies.get(b);if(c){sch.debug("prefsval exists");for(var a in c){sc.helpers.dump('Copying loaded pref "'+a+'":"'+this._prefs[a]+'" ('+typeof(this._prefs[a])+")");this._prefs[a]=c[a];}}else{sch.debug("prefsval does not exist; saving with defaults");this.save();}};SpazPrefs.prototype.save=function(){var a=this.id||SPAZCORE_PREFS_STANDARD_COOKIENAME;jaaulde.utils.cookies.set(a,this._prefs);sch.debug("stored prefs in cookie");};